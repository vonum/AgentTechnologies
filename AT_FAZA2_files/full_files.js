define("translations/files",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{ar:{errors:{failed:"فشل"},files:{alts:{file:"ملف",folder:"مجلد",folder_locked:"تم تأمين المجلد",locked_file:"تم تأمين الملف"},buttons:{update_file:"تحديث الملف"},cancel:"إلغاء",errors:{extracting:"حديث أخطاء أثناء استخراج الملف المضغوط.  يرجى المحاولة مرة أخرى.",failed_uploading:"فشل التحميل: %{error_info}",loading_file:"حدث خطأ أثناء تحميل محتويات الملف.  يرجى المحاولة مرة أخرى.",server_returned_invalid_status:"توقف الخادم عن العودة للحالة الصالحة",server_unresponsive:"توقف الخادم عن الاستجابة لطلبات الحالة",unexpected_response:"لم يتم إرجاع الاستجابة المتوقعة",update_file_failed:"فشل تحديث الملف، الرجاء المحاولة مرة أخرى",uploading:"خطأ في التحميل",uploading_zip:"حدثت أخطاء أثناء تحميل الملف المضغوط."},links:{add_files:"إضافة ملفات"},messages:{access_denied:"لا يمكنك قراءة محتويات هذا المجلد.",done_uploading:"انتهاء التحميل",error_count:{one:"خطأ واحد",other:"%{count} من الأخطاء"},extraction_complete:"احجبل الاستخراج!  جارٍ تحديث بنية الملف...",finalizing:"إنهاء",folder_empty:"لا يوجد شيء في هذا المجلد",loading_files:"جارٍ تحميل الملفات...",no_files_selected:"لم يتم تحديد ملفات صالحة",queued:"‏‏في قائمة الانتظار",updating_file:"جارٍ تحديث الملف...",upload_complete:"انتهى التحميل",uploading:"التحميل",uploading_files:{one:"جارٍ تحميل ملف واحد...",other:"جارٍ تحميل %{count} من الملفات..."}},prompts:{delete_file:"هل ترغب بالتأكيد في حذف هذا الملف؟",delete_folder:"هل ترغب بالتأكيد في حذف هذا المجلد وكل محتوياته؟",duplicate_filenames:"توجد ملفات بالأسماء التالية بالفعل في هذا المجلد. هل تريد استبدالها أم إعادة تسمية الملفات الجديدة بأسماء فريدة؟",extract_zip:"هذا الملف ملف مضغوط.  هل تريد استخراج محتوياته داخل هذا المجلد؟"},titles:{click_and_drag:"انقر واسحب لنقل المجلد إلى مجلد آخر",drag_to_move:"اسحب للانتقال إلى مجلد مختلف",extracting:"استخراج الملفات إلى مجلدات",file_uplaods_queue:"قائمة انتظار تحميل الملف",lock_file:"تأمين الملف",lock_folder:"تأمين المجلد"},update_file:"تحديث الملف",upload_error:"حدث خطأ أثناء تحميل الملف",warnings:{file_uploaded_without_response:"ربما تم تحميل الملف، لكن فشل الخادم في الاستجابة.  أعد تحميل الصفحة للتأكيد."}}},"en-AU":{errors:{failed:"Failed"},files:{alts:{file:"File",folder:"Folder",folder_locked:"Locked Folder",locked_file:"Locked File"},buttons:{update_file:"Update File"},cancel:"Cancel",errors:{extracting:"There were errors extracting the zip file.  Please try again.",failed_uploading:"Failed uploading: %{error_info}",loading_file:"Error Loading File Contents.  Please try again.",server_returned_invalid_status:"The server stopped returning a valid status",server_unresponsive:"The server stopped responding to status requests",unexpected_response:"didn't get back expected response",update_file_failed:"Updating File Failed, please try again",uploading:"Uploading Error",uploading_zip:"There were errors uploading the zip file."},links:{add_files:"Add Files"},messages:{access_denied:"You cannot read the contents of this folder.",done_uploading:"Done uploading",error_count:{one:"1 Error",other:"%{count} Errors"},extraction_complete:"Extraction complete!  Updating...",finalizing:"Finalizing",folder_empty:"Nothing in this Folder",loading_files:"Loading Files...",no_files_selected:"No valid files were selected",queued:"Queued",updating_file:"Updating File...",upload_complete:"Done uploading",uploading:"Uploading",uploading_files:{one:"Uploading 1 File...",other:"Uploading %{count} Files..."}},prompts:{delete_file:"Are you sure you want to delete this file?",delete_folder:"Are you sure you want to delete this folder and all of its contents?",duplicate_filenames:"Files with the following names already exist in this folder. Do you want to replace them, or rename the new files with unique names?",extract_zip:"This file is a zip file.  Do you want to extract its contents into this folder?"},titles:{click_and_drag:"Click and drag to move folder to another folder",drag_to_move:"Drag to move to a different folder",extracting:"Extracting Files into Folder",file_uplaods_queue:"File Uploads Queue",lock_file:"Lock File",lock_folder:"Lock Folder"},update_file:"Update File",upload_error:"There was an error uploading your file",warnings:{file_uploaded_without_response:"File may have uploaded, but the server failed to respond.  Reload the page to confirm."}}},"en-GB":{errors:{failed:"Failed"},files:{alts:{file:"File",folder:"Folder",folder_locked:"Locked folder",locked_file:"Locked file"},buttons:{update_file:"Update file"},cancel:"Cancel",errors:{extracting:"There were errors extracting the zip file.  Please try again.",failed_uploading:"Failed uploading: %{error_info}",loading_file:"Error loading file contents.  Please try again.",server_returned_invalid_status:"The server stopped returning a valid status",server_unresponsive:"The server stopped responding to status requests",unexpected_response:"didn't get back expected response",update_file_failed:"Updating file failed, please try again",uploading:"Uploading error",uploading_zip:"There were errors uploading the zip file."},links:{add_files:"Add files"},messages:{access_denied:"You cannot read the contents of this folder.",done_uploading:"Done uploading",error_count:{one:"1 error",other:"%{count} errors"},extraction_complete:"Extraction complete!  Updating...",finalizing:"Finalising",folder_empty:"Nothing in this folder",loading_files:"Loading files...",no_files_selected:"No valid files were selected",queued:"Queued",updating_file:"Updating file...",upload_complete:"Done uploading",uploading:"Uploading",uploading_files:{one:"Uploading one file...",other:"Uploading %{count} files..."}},prompts:{delete_file:"Are you sure you want to delete this file?",delete_folder:"Are you sure you want to delete this folder and all of its contents?",duplicate_filenames:"Files with the following names already exist in this folder. Do you want to replace them, or rename the new files with unique names?",extract_zip:"This file is a zip file.  Do you want to extract its contents into this folder?"},titles:{click_and_drag:"Click and drag to move folder to another folder",drag_to_move:"Drag to move to a different folder",extracting:"Extracting files into folder",file_uplaods_queue:"File uploads queue",lock_file:"Lock file",lock_folder:"Lock folder"},update_file:"Update file",upload_error:"There was an error uploading your file",warnings:{file_uploaded_without_response:"File may have uploaded, but the server failed to respond.  Reload the page to confirm."}}},es:{errors:{failed:"Falló"},files:{alts:{file:"Archivo",folder:"Carpeta",folder_locked:"Carpeta Bloqueada",locked_file:"Archivo Bloqueado"},buttons:{update_file:"Actualice el Archivo"},cancel:"Cancelar",errors:{extracting:"Hubieron errors extrayendo el archivo zip. Intente de nuevo.",failed_uploading:"La Carga Falló: %{error_info} ",loading_file:"Error Cargando los Contenidos de Archivo. Intente de nuevo.",server_returned_invalid_status:"El servidor dejó de reporter un estátus válido",server_unresponsive:"El servidor dejó de responder a las solicitudes de estatus",unexpected_response:"no se obtuvo una respuesta esperada",update_file_failed:"Actualización del Archivo Falló, intente de nuevo",uploading:"Error de Carga",uploading_zip:"Se han producido varios errores al cargar el archivo zip"},links:{add_files:"Agregar Archivos"},messages:{access_denied:"No puede leer el contenido de este folder.",done_uploading:"Carga completa",error_count:{one:"1 Error",other:"%{count} Errores"},extraction_complete:"¡Extracción completa! Actualización la Estructura del Archivo...",finalizing:"Finalizando",folder_empty:"Nada en esta Carpeta",loading_files:"Cargando los archivos...",no_files_selected:"Ningún archivo válido fue seleccionado",queued:"En Fila",updating_file:"Actualizando el Archivo...",upload_complete:"Carga completa",uploading:"Cargando ",uploading_files:{one:"Cargando 1 Archivo...",other:"Cargando %{count} Archivos..."}},prompts:{delete_file:"¿Está seguro de que quiere borrar este archivo?",delete_folder:"¿Está seguro de que quiere borrar esta carpeta y todos sus componentes?",duplicate_filenames:"Los archivos con los siguientes nombres ya existen en esta carpeta. ¿Desea reemplazarlos, o renombrarlos con nombres únicos?",extract_zip:"Este archivo es un archivo comprimido zip. ¿Desea extraer sus contenidos en esta carpeta?"},titles:{click_and_drag:"Hacer click y arrastrar para mover la carpeta a otra carpeta",drag_to_move:"Arrastrar para mover a una carpeta diferente",extracting:"Extrayendo Archivos a la Carpeta",file_uplaods_queue:"Lista de Cargas de Archivos",lock_file:"Bloquear el Archivo",lock_folder:"Bloquear la Carpeta"},update_file:"Actualice el Archivo",upload_error:"Ocurrió un error al cargar su archivo",warnings:{file_uploaded_without_response:"El archive puede haberse cargado, pero el servidor no ha respondido. Recargue la página para confirmar."}}},fr:{errors:{failed:"Échec"},files:{alts:{file:"Fichier",folder:"Dossier",folder_locked:"Dossier verrouillé",locked_file:"Fichier verrouillé"},buttons:{update_file:"Mettre à jour le fichier"},cancel:"Annuler",errors:{extracting:"Des erreurs se sont produites lors de l’extraction du fichier zip. Veuillez réessayer.",failed_uploading:"Échec lors du téléchargement : %{error_info}",loading_file:"Erreur lors du chargement du contenu du fichier. Veuillez réessayer.",server_returned_invalid_status:"Le serveur ne renvoie plus de statut valide",server_unresponsive:"Le serveur ne répond plus aux demandes de statuts",unexpected_response:"la réponse attendue n’a pas été obtenue",update_file_failed:"Échec de la mise à jour du fichier, veuillez réessayer",uploading:"Erreur de téléchargement",uploading_zip:"Des erreurs sont survenues lors du téléchargement du fichier zip."},links:{add_files:"Ajouter des fichiers"},messages:{access_denied:"Impossible de lire le contenu de ce dossier.",done_uploading:"Téléchargement terminé",error_count:{one:"1 erreur",other:"%{count} erreurs"},extraction_complete:"Extraction terminée. Mise à jour de la structure de fichiers...",finalizing:"Finalisation",folder_empty:"Ce dossier est vide",loading_files:"Chargement des fichiers...",no_files_selected:"Aucun fichier valide n’est sélectionné",queued:"En file d’attente",updating_file:"Mise à jour du fichier...",upload_complete:"Téléchargement terminé",uploading:"Téléchargement",uploading_files:{one:"Téléchargement d’un fichier...",other:"Téléchargement de %{count} fichiers..."}},prompts:{delete_file:"Voulez-vous vraiment supprimer ce fichier ?",delete_folder:"Voulez-vous vraiment supprimer ce dossier et tout ce qu’il contient ?",duplicate_filenames:"Des fichiers portant ce nom existent déjà dans ce dossier. Voulez-vous les remplacer ou renommer les nouveaux fichiers avec des noms uniques ?",extract_zip:"Ce fichier est un fichier zip. Voulez-vous extraire son contenu dans ce dossier ?"},titles:{click_and_drag:"Cliquer sur le dossier et le faire glisser dans un autre dossier",drag_to_move:"Faire glisser pour déplacer dans un dossier différent",extracting:"Extraction des fichiers dans un dossier",file_uplaods_queue:"File d’attente de téléchargement des fichiers",lock_file:"Verrouiller le fichier",lock_folder:"Verrouiller le dossier"},update_file:"Mettre à jour le fichier",upload_error:"Erreur lors du téléchargement du fichier",warnings:{file_uploaded_without_response:"Le fichier est peut-être téléchargé mais le serveur n’a pas répondu. Retéléchargez la page pour confirmer."}}},ja:{errors:{failed:"失敗しました"},files:{alts:{file:"ファイル",folder:"フォルダ",folder_locked:"ロックされているフォルダ",locked_file:"ロックされているファイル"},buttons:{update_file:"ファイルの更新"},cancel:"キャンセル",errors:{extracting:"zip ファイルを解凍する際にエラーが発生しました。もう一度、試してください。",failed_uploading:"アップロードに失敗しました。 %{error_info}",loading_file:"ファイルの内容を読み込む際にエラーが発生しました。もう一度、試してください。",server_returned_invalid_status:"サーバは、有効なステータスを返すことを停止しました。",server_unresponsive:"サーバは、ステータス要求への応答を停止しました。",unexpected_response:"予期された応答を返しませんでした",update_file_failed:"ファイルの更新に失敗しました。もう一度やり直してください",uploading:"アップロード エラーです",uploading_zip:"zip ファイルをアップロードする際にエラーが発生しました。"},links:{add_files:"ファイルの追加"},messages:{access_denied:"このフォルダの内容は読み取りできません。",done_uploading:"アップロードが完了しました",error_count:{one:"%{count} 個のエラー",other:"%{count} 個のエラー"},extraction_complete:"解凍が完了しました!ファイル構造を更新しています...",finalizing:"最終処理を行っています",folder_empty:"このフォルダには何も入っていません",loading_files:"ファイルを読み込んでいます。",no_files_selected:"有効なファイルが選択されませんでした",queued:"キューに入っています",updating_file:"ファイルを更新しています...",upload_complete:"アップロードが完了しました",uploading:"アップロードしています",uploading_files:{one:"%{count} 個のファイルをアップロードしています...",other:"%{count} 個のファイルをアップロードしています..."}},prompts:{delete_file:"このファイルを削除してもよろしいですか?",delete_folder:"このフォルダとそのすべての内容を削除してもよろしいですか?",duplicate_filenames:"次の名前のファイルは、既にこのフォルダに存在しています。同じ名前のファイルを置き換えますか? または、新しいファイルを一意の名前に変更しますか?",extract_zip:"このファイルは zip ファイルです。解凍後の内容をこのフォルダに入れますか?"},titles:{click_and_drag:"クリック アンド ドラッグでフォルダを別のフォルダに移動します",drag_to_move:"ドラッグして別のフォルダに移動します",extracting:"ファイルをフォルダ内に解凍しています",file_uplaods_queue:"ファイル アップロード キュー",lock_file:"ファイルのロック",lock_folder:"フォルダのロック"},update_file:"ファイルの更新",upload_error:"ファイルをアップロードする際にエラーが発生しました",warnings:{file_uploaded_without_response:"ファイルはアップロードされたようですが、サーバからの応答に失敗しました。ページを再読み込みして、確認してください。"}}},ko:{errors:{failed:"실패함"},files:{alts:{file:"파일",folder:"폴더",folder_locked:"잠긴 폴더",locked_file:"잠긴 파일"},buttons:{update_file:"파일 업데이트"},cancel:"취소",errors:{extracting:"zip 파일의 압축을 해제하는 데 오류가 있습니다.  다시 시도하시기 바랍니다.",failed_uploading:"업로드 실패: %{error_info}",loading_file:"파일 내용 업로드 오류입니다. 다시 시도하시기 바랍니다.",server_returned_invalid_status:"서버가 유효한 상태 반환을 멈춤",server_unresponsive:"서버가 상태 요청에 응답을 멈춤",unexpected_response:"필요한 응답을 받지 못함",update_file_failed:"파일 업데이트 실패. 다시 시도하시기 바랍니다.",uploading:"업로드 오류",uploading_zip:"zip 파일을 업로드하는 중에 오류가 발생했습니다."},links:{add_files:"파일 추가"},messages:{access_denied:"이 폴더의 내용을 읽을 수 없습니다.",done_uploading:"업로드 마침",error_count:{one:"오류 %{count}개",other:"오류 %{count}개"},extraction_complete:"추출이 완료되었습니다! 업데이트 중...",finalizing:"마무리 중",folder_empty:"이 폴더에 내용 없음",loading_files:"파일 로드 중...",no_files_selected:"유효한 파일이 선택되지 않음",queued:"대기",updating_file:"파일 업데이트 중...",upload_complete:"업로드 마침",uploading:"업로드 중",uploading_files:{one:"파일 %{count}개 업로드 중...",other:"파일 %{count}개 업로드 중..."}},prompts:{delete_file:"이 파일을 삭제하시겠습니까?",delete_folder:"이 폴더와 폴더의 모든 내용을 삭제하시겠습니까?",duplicate_filenames:"다음 이름을 가진 파일이 이 폴더에 이미 존재합니다. 파일을 대체하시겠습니까, 아니면 새 파일을 고유한 이름으로 바꾸시겠습니까?",extract_zip:"이 파일은 zip 파일입니다. 이 폴더에 압축을 해제하시겠습니까?"},titles:{click_and_drag:"폴더를 다른 폴더로 옮기려면 클릭해서 끌기",drag_to_move:"다른 폴더로 옮기려면 끌기",extracting:"폴더에 파일 압축 해제",file_uplaods_queue:"파일 업로드 큐",lock_file:"파일 잠금",lock_folder:"폴더 잠금"},update_file:"파일 업데이트",upload_error:"파일 업로드 중 오류 발생",warnings:{file_uploaded_without_response:"파일을 업로드했으나 서버가 응답에 실패했습니다. 확인하려면 페이지를 다시 로드하십시오."}}},nl:{errors:{failed:"Mislukt"},files:{alts:{file:"Bestand",folder:"Map",folder_locked:"Vergrendelde map",locked_file:"Vergrendeld bestand"},buttons:{update_file:"Wijzig bestand"},cancel:"Annuleren",errors:{extracting:"Er zijn fouten opgetreden tijdens het uitpakken van het zipbestand. Probeer het opnieuw.",failed_uploading:"Uploaden is mislukt: %{error_info}",loading_file:"Er is een fout opgetreden tijdens het laden van de bestandsinhoud. Probeer het opnieuw.",server_returned_invalid_status:"De server heeft een ongeldige status gestuurd",server_unresponsive:"De server reageert niet meer op statusverzoeken",unexpected_response:"geen juiste reactie ontvangen",update_file_failed:"Het wijzigen van het bestand is mislukt, probeer het opnieuw",uploading:"Fout tijdens het uploaden",uploading_zip:"Er zijn fouten opgetreden tijdens het uploaden van het zipbestand."},links:{add_files:"Bestanden toevoegen"},messages:{access_denied:"De inhoud van deze map kan niet gelezen worden.",done_uploading:"Klaar met uploaden",error_count:{one:"1 fout",other:"%{count} fouten"},extraction_complete:"Klaar met uitpakken! Bezig met bijwerken...",finalizing:"Wordt voltooid",folder_empty:"Deze map is leeg",loading_files:"Bezig met laden van bestanden...",no_files_selected:"Geen geldige bestanden geselecteerd",queued:"In de wacht",updating_file:"Bestand wordt gewijzigd...",upload_complete:"Klaar met uploaden",uploading:"Bezig met uploaden",uploading_files:{one:"Bezig met uploaden van 1 bestand...",other:"Bezig met uploaden van %{count} bestanden..."}},prompts:{delete_file:"Weet u zeker dat u dit bestand wilt verwijderen?",delete_folder:"Weet u zeker dat u deze map inclusief inhoud wilt verwijderen?",duplicate_filenames:"Er bestaan al bestanden met de volgende namen in deze map. Wilt u de bestanden overschrijven of wilt u de nieuwe bestanden hernoemen? ",extract_zip:"Dit bestand is een zipbestand.  Wilt u de inhoud uitpakken in deze map?"},titles:{click_and_drag:"Klik en sleep om een map naar een andere map te verplaatsen",drag_to_move:"Sleep om item naar een andere map te verplaatsen",extracting:"Bestanden worden uitgepakt in map",file_uplaods_queue:"Wachtrij voor te uploaden bestanden",lock_file:"Vergrendel bestand",lock_folder:"Vergrendel map"},update_file:"Wijzig bestand",upload_error:"Er is een fout opgetreden tijdens het uploaden van uw bestand",warnings:{file_uploaded_without_response:"Bestand kan geüpload zijn, maar de server reageert niet. Vernieuw de pagina om dit te controleren."}}},pt:{errors:{failed:"Falhou"},files:{alts:{file:"Arquivo",folder:"Pasta",folder_locked:"Pasta travada",locked_file:"Ficheiro bloqueado"},buttons:{update_file:"Atualizar arquivo"},cancel:"Cancelar",errors:{extracting:"Houve erros durante a extração do arquivo zip.  Tente novamente.",failed_uploading:"Falha no upload: %{error_info}",loading_file:"Erro ao carregar conteúdo do arquivo.  Tente novamente.",server_returned_invalid_status:"O servidor parou de retornar um status válido",server_unresponsive:"O servidor parou de responder às solicitações de status",unexpected_response:"não retornou a resposta esperada",update_file_failed:"Falha na atualização do arquivo, tente novamente",uploading:"Erro no upload",uploading_zip:"Ocorreram erros durante o carregamento do ficheiro zip."},links:{add_files:"Adicionar arquivos"},messages:{access_denied:"Não é possível ler o conteúdo desta pasta.",done_uploading:"Upload concluído",error_count:{one:"1 erro",other:"%{count} erros"},extraction_complete:"Extração concluída!  Atualizando a estrutura de arquivo...",finalizing:"Concluindo",folder_empty:"Nada nesta pasta",loading_files:"Carregando arquivos...",no_files_selected:"Nenhum arquivo válido selecionado",queued:"Na fila",updating_file:"Atualizando arquivo...",upload_complete:"Upload concluído",uploading:"Realizando upload",uploading_files:{one:"Fazendo upload de 1 arquivo...",other:"Fazendo upload de %{count} arquivos..."}},prompts:{delete_file:"Tem certeza de que deseja excluir este arquivo?",delete_folder:"Tem certeza de que deseja excluir esta pasta e todo seu conteúdo?",duplicate_filenames:"Já existem ficheiros com os seguintes nomes nesta pasta. Deseja substituí-los ou mudar o nome dos novos ficheiros para nomes exclusivos?",extract_zip:"Este arquivo é um arquivo zip.  Deseja extrair seu conteúdo nesta pasta?"},titles:{click_and_drag:"Clique e arraste para mover a pasta para outra pasta",drag_to_move:"Arrastar para mover a uma pasta diferente",extracting:"Extraindo arquivos na pasta",file_uplaods_queue:"Fila de upload de arquivo",lock_file:"Travar arquivo",lock_folder:"Travar pasta"},update_file:"Atualizar arquivo",upload_error:"Ocorreu um erro durante o carregamento do ficheiro",warnings:{file_uploaded_without_response:"O upload do arquivo foi realizado, mas o servidor não responde.  Recarregue a página para confirmar."}}},ru:{errors:{failed:"Ошибка"},files:{alts:{file:"Файл",folder:"Папка",folder_locked:"Заблокированная папка",locked_file:"Заблокированный файл"},buttons:{update_file:"Обновить файл"},cancel:"Отменить",errors:{extracting:"При извлечении ZIP-файла произошли ошибки.  Повторите попытку.",failed_uploading:"Ошибка загрузки: %{error_info}",loading_file:"Ошибка загрузки содержания файла.  Повторите попытку.",server_returned_invalid_status:"Сервер прекратил возвращать действительное состояние",server_unresponsive:"Сервер прекратил отвечать на запросы статуса",unexpected_response:"ожидаемый ответ не получен",update_file_failed:"Ошибка загрузки файла, повторите попытку",uploading:"Ошибка загрузки",uploading_zip:"Произошло несколько ошибок при загрузке архива"},links:{add_files:"Добавить файлы"},messages:{access_denied:"Чтение содержимого этой папки невозможно.",done_uploading:"Загрузка завершена",error_count:{one:"1 ошибка",other:"%{count} ошибки(ок)"},extraction_complete:"Извлечение завершено!  Загрузка структуры файла...",finalizing:"Завершение",folder_empty:"Эта папка пустая",loading_files:"Загрузка файлов...",no_files_selected:"Допустимые файлы не выбраны",queued:"Постановка в очередь",updating_file:"Обновление файла...",upload_complete:"Загрузка завершена",uploading:"Загрузка",uploading_files:{one:"Загрузка 1 файла...",other:"Загрузка %{count} файлов..."}},prompts:{delete_file:"Действительно хотите удалить этот файл?",delete_folder:"Удалить эту папку и все ее содержимое?",duplicate_filenames:"Файлы с такими именами уже существуют в этой папке. Заменить их или переименовать новые файлы, используя эти уникальные имена?",extract_zip:"Это ZIP-файл.  Извлечь его содержимое в эту папку?"},titles:{click_and_drag:"Щелкните и перетащите для переноса этой папки в другую папку",drag_to_move:"Перетащите для переноса в другую папку",extracting:"Извлечение файлов в папку",file_uplaods_queue:"Очередь загрузки файлов",lock_file:"Заблокировать файл",lock_folder:"Заблокировать папку"},update_file:"Обновить файл",upload_error:"Произошла ошибка во время загрузки вашего файла",warnings:{file_uploaded_without_response:"Файлы могут быть загружены, но сервер не смог ответить.  Перезагрузите страницу для подтверждения."}}},zh:{errors:{failed:"已失败"},files:{alts:{file:"文件",folder:"文件夹",folder_locked:"已锁定文件夹",locked_file:"已锁定文件"},buttons:{update_file:"更新文件"},cancel:"取消",errors:{extracting:"提取压缩文件时出错。请重试。",failed_uploading:"上传失败: %{error_info}",loading_file:"加载文件内容出错。请重试。",server_returned_invalid_status:"服务器停止返回有效状态",server_unresponsive:"服务器停止响应状态请求",unexpected_response:"未得到预期响应",update_file_failed:"更新文件失败，请重试",uploading:"上传出错",uploading_zip:"上传 zip 文件时出错。"},links:{add_files:"添加文件"},messages:{access_denied:"您无法阅读此文件夹的内容。",done_uploading:"完成上传",error_count:{one:"%{count} 个错误",other:"%{count} 个错误"},extraction_complete:"提取完成！正在更新文件结构...",finalizing:"完成",folder_empty:"此文件夹中没有内容",loading_files:"正在加载文件...",no_files_selected:"未选择有效的文件",queued:"已排队",updating_file:"正在更新文件...",upload_complete:"完成上传",uploading:"正在上传",uploading_files:{one:"正在上传 %{count} 个文件...",other:"正在上传 %{count} 个文件..."}},prompts:{delete_file:"是否确定要删除此文件?",delete_folder:"是否确定要删除此文件夹及其所有内容?",duplicate_filenames:"此文件中已存在以下名称的文件。是否要替换它们，或者用独特的名称重命名新文件?",extract_zip:"此文件为压缩文件。是否要提取其内容到此文件夹?"},titles:{click_and_drag:"单击并拖动可将文件夹移动到其他文件夹",drag_to_move:"拖动以移动到其他文件夹",extracting:"正在提取文件到文件夹",file_uplaods_queue:"文件上传队列",lock_file:"锁定文件",lock_folder:"锁定文件夹"},update_file:"更新文件",upload_error:"上传您的文件时出错",warnings:{file_uploaded_without_response:"文件可能已上传，但服务器没有响应。请重新加载页面以确认。"}}}}})});var swfobject=function(){function A(){if(t)return;try{var a=i.getElementsByTagName("body")[0].appendChild(Q("span"));a.parentNode.removeChild(a)}catch(b){return}t=!0;var c=l.length;for(var d=0;d<c;d++)l[d]()}function B(a){t?a():l[l.length]=a}function C(b){if(typeof h.addEventListener!=a)h.addEventListener("load",b,!1);else if(typeof i.addEventListener!=a)i.addEventListener("load",b,!1);else if(typeof h.attachEvent!=a)R(h,"onload",b);else if(typeof h.onload=="function"){var c=h.onload;h.onload=function(){c(),b()}}else h.onload=b}function D(){k?E():F()}function E(){var c=i.getElementsByTagName("body")[0],d=Q(b);d.setAttribute("type",e);var f=c.appendChild(d);if(f){var g=0;(function(){if(typeof f.GetVariable!=a){var b=f.GetVariable("$version");b&&(b=b.split(" ")[1].split(","),y.pv=[parseInt(b[0],10),parseInt(b[1],10),parseInt(b[2],10)])}else if(g<10){g++,setTimeout(arguments.callee,10);return}c.removeChild(d),f=null,F()})()}else F()}function F(){var b=m.length;if(b>0)for(var c=0;c<b;c++){var d=m[c].id,e=m[c].callbackFn,f={success:!1,id:d};if(y.pv[0]>0){var g=P(d);if(g)if(S(m[c].swfVersion)&&!(y.wk&&y.wk<312))U(d,!0),e&&(f.success=!0,f.ref=G(d),e(f));else if(m[c].expressInstall&&H()){var h={};h.data=m[c].expressInstall,h.width=g.getAttribute("width")||"0",h.height=g.getAttribute("height")||"0",g.getAttribute("class")&&(h.styleclass=g.getAttribute("class")),g.getAttribute("align")&&(h.align=g.getAttribute("align"));var i={},j=g.getElementsByTagName("param"),k=j.length;for(var l=0;l<k;l++)j[l].getAttribute("name").toLowerCase()!="movie"&&(i[j[l].getAttribute("name")]=j[l].getAttribute("value"));I(h,i,d,e)}else J(g),e&&e(f)}else{U(d,!0);if(e){var n=G(d);n&&typeof n.SetVariable!=a&&(f.success=!0,f.ref=n),e(f)}}}}function G(c){var d=null,e=P(c);if(e&&e.nodeName=="OBJECT")if(typeof e.SetVariable!=a)d=e;else{var f=e.getElementsByTagName(b)[0];f&&(d=f)}return d}function H(){return!u&&S("6.0.65")&&(y.win||y.mac)&&!(y.wk&&y.wk<312)}function I(b,c,d,e){u=!0,r=e||null,s={success:!1,id:d};var g=P(d);if(g){g.nodeName=="OBJECT"?(p=K(g),q=null):(p=g,q=d),b.id=f;if(typeof b.width==a||!/%$/.test(b.width)&&parseInt(b.width,10)<310)b.width="310";if(typeof b.height==a||!/%$/.test(b.height)&&parseInt(b.height,10)<137)b.height="137";i.title=i.title.slice(0,47)+" - Flash Player Installation";var j=y.ie&&y.win?"ActiveX":"PlugIn",k="MMredirectURL="+h.location.toString().replace(/&/g,"%26")+"&MMplayerType="+j+"&MMdoctitle="+i.title;typeof c.flashvars!=a?c.flashvars+="&"+k:c.flashvars=k;if(y.ie&&y.win&&g.readyState!=4){var l=Q("div");d+="SWFObjectNew",l.setAttribute("id",d),g.parentNode.insertBefore(l,g),g.style.display="none",function(){g.readyState==4?g.parentNode.removeChild(g):setTimeout(arguments.callee,10)}()}L(b,c,d)}}function J(a){if(y.ie&&y.win&&a.readyState!=4){var b=Q("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(K(a),b),a.style.display="none",function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(K(a),a)}function K(a){var c=Q("div");if(y.win&&y.ie)c.innerHTML=a.innerHTML;else{var d=a.getElementsByTagName(b)[0];if(d){var e=d.childNodes;if(e){var f=e.length;for(var g=0;g<f;g++)(e[g].nodeType!=1||e[g].nodeName!="PARAM")&&e[g].nodeType!=8&&c.appendChild(e[g].cloneNode(!0))}}}return c}function L(c,d,f){var g,h=P(f);if(y.wk&&y.wk<312)return g;if(h){typeof c.id==a&&(c.id=f);if(y.ie&&y.win){var i="";for(var j in c)c[j]!=Object.prototype[j]&&(j.toLowerCase()=="data"?d.movie=c[j]:j.toLowerCase()=="styleclass"?i+=' class="'+c[j]+'"':j.toLowerCase()!="classid"&&(i+=" "+j+'="'+c[j]+'"'));var k="";for(var l in d)d[l]!=Object.prototype[l]&&(k+='<param name="'+l+'" value="'+d[l]+'" />');h.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+k+"</object>",n[n.length]=c.id,g=P(c.id)}else{var m=Q(b);m.setAttribute("type",e);for(var o in c)c[o]!=Object.prototype[o]&&(o.toLowerCase()=="styleclass"?m.setAttribute("class",c[o]):o.toLowerCase()!="classid"&&m.setAttribute(o,c[o]));for(var p in d)d[p]!=Object.prototype[p]&&p.toLowerCase()!="movie"&&M(m,p,d[p]);h.parentNode.replaceChild(m,h),g=m}}return g}function M(a,b,c){var d=Q("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function N(a){var b=P(a);b&&b.nodeName=="OBJECT"&&(y.ie&&y.win?(b.style.display="none",function(){b.readyState==4?O(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function O(a){var b=P(a);if(b){for(var c in b)typeof b[c]=="function"&&(b[c]=null);b.parentNode.removeChild(b)}}function P(a){var b=null;try{b=i.getElementById(a)}catch(c){}return b}function Q(a){return i.createElement(a)}function R(a,b,c){a.attachEvent(b,c),o[o.length]=[a,b,c]}function S(a){var b=y.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function T(c,d,e,f){if(y.ie&&y.mac)return;var g=i.getElementsByTagName("head")[0];if(!g)return;var h=e&&typeof e=="string"?e:"screen";f&&(v=null,w=null);if(!v||w!=h){var j=Q("style");j.setAttribute("type","text/css"),j.setAttribute("media",h),v=g.appendChild(j),y.ie&&y.win&&typeof i.styleSheets!=a&&i.styleSheets.length>0&&(v=i.styleSheets[i.styleSheets.length-1]),w=h}y.ie&&y.win?v&&typeof v.addRule==b&&v.addRule(c,d):v&&typeof i.createTextNode!=a&&v.appendChild(i.createTextNode(c+" {"+d+"}"))}function U(a,b){if(!x)return;var c=b?"visible":"hidden";t&&P(a)?P(a).style.visibility=c:T("#"+a,"visibility:"+c)}function V(b){var c=/[\\\"<>\.;]/,d=c.exec(b)!=null;return d&&typeof encodeURIComponent!=a?encodeURIComponent(b):b}var a="undefined",b="object",c="Shockwave Flash",d="ShockwaveFlash.ShockwaveFlash",e="application/x-shockwave-flash",f="SWFObjectExprInst",g="onreadystatechange",h=window,i=document,j=navigator,k=!1,l=[D],m=[],n=[],o=[],p,q,r,s,t=!1,u=!1,v,w,x=!0,y=function(){var f=typeof i.getElementById!=a&&typeof i.getElementsByTagName!=a&&typeof i.createElement!=a,g=j.userAgent.toLowerCase(),l=j.platform.toLowerCase(),m=l?/win/.test(l):/win/.test(g),n=l?/mac/.test(l):/mac/.test(g),o=/webkit/.test(g)?parseFloat(g.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=!1,q=[0,0,0],r=null;if(typeof j.plugins!=a&&typeof j.plugins[c]==b)r=j.plugins[c].description,r&&(typeof j.mimeTypes==a||!j.mimeTypes[e]||!!j.mimeTypes[e].enabledPlugin)&&(k=!0,p=!1,r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),q[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),q[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),q[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof h.ActiveXObject!=a)try{var s=new ActiveXObject(d);s&&(r=s.GetVariable("$version"),r&&(p=!0,r=r.split(" ")[1].split(","),q=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)]))}catch(t){}return{w3:f,pv:q,wk:o,ie:p,win:m,mac:n}}(),z=function(){if(!y.w3)return;(typeof i.readyState!=a&&i.readyState=="complete"||typeof i.readyState==a&&(i.getElementsByTagName("body")[0]||i.body))&&A(),t||(typeof i.addEventListener!=a&&i.addEventListener("DOMContentLoaded",A,!1),y.ie&&y.win&&(i.attachEvent(g,function(){i.readyState=="complete"&&(i.detachEvent(g,arguments.callee),A())}),h==top&&function(){if(t)return;try{i.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}A()}()),y.wk&&function(){if(t)return;if(!/loaded|complete/.test(i.readyState)){setTimeout(arguments.callee,0);return}A()}(),C(A))}(),W=function(){y.ie&&y.win&&window.attachEvent("onunload",function(){var a=o.length;for(var b=0;b<a;b++)o[b][0].detachEvent(o[b][1],o[b][2]);var c=n.length;for(var d=0;d<c;d++)N(n[d]);for(var e in y)y[e]=null;y=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}();return{registerObject:function(a,b,c,d){if(y.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,m[m.length]=e,U(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(y.w3)return G(a)},embedSWF:function(c,d,e,f,g,h,i,j,k,l){var m={success:!1,id:d};y.w3&&!(y.wk&&y.wk<312)&&c&&d&&e&&f&&g?(U(d,!1),B(function(){e+="",f+="";var n={};if(k&&typeof k===b)for(var o in k)n[o]=k[o];n.data=c,n.width=e,n.height=f;var p={};if(j&&typeof j===b)for(var q in j)p[q]=j[q];if(i&&typeof i===b)for(var r in i)typeof p.flashvars!=a?p.flashvars+="&"+r+"="+i[r]:p.flashvars=r+"="+i[r];if(S(g)){var s=L(n,p,d);n.id==d&&U(d,!0),m.success=!0,m.ref=s}else{if(h&&H()){n.data=h,I(n,p,d,l);return}U(d,!0)}l&&l(m)})):l&&l(m)},switchOffAutoHideShow:function(){x=!1},ua:y,getFlashPlayerVersion:function(){return{major:y.pv[0],minor:y.pv[1],release:y.pv[2]}},hasFlashPlayerVersion:S,createSWF:function(a,b,c){return y.w3?L(a,b,c):undefined},showExpressInstall:function(a,b,c,d){y.w3&&H()&&I(a,b,c,d)},removeSWF:function(a){y.w3&&N(a)},createCSS:function(a,b,c,d){y.w3&&T(a,b,c,d)},addDomLoadEvent:B,addLoadEvent:C,getQueryParamValue:function(a){var b=i.location.search||i.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return V(b);var c=b.split("&");for(var d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return V(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(u){var a=P(f);a&&p&&(a.parentNode.replaceChild(p,a),q&&(U(q,!0),y.ie&&y.win&&(p.style.display="block")),r&&r(s)),u=!1}}}}(),SWFUpload;SWFUpload==undefined&&(SWFUpload=function(a){this.initSWFUpload(a)}),SWFUpload.prototype.initSWFUpload=function(a){try{this.customSettings={},this.settings=a,this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(b){throw delete SWFUpload.instances[this.movieName],b}},SWFUpload.instances={},SWFUpload.movieCount=0,SWFUpload.version="2.2.0 2009-03-25",SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290},SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120},SWFUpload.CURSOR={ARROW:-1,HAND:-2},SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"},SWFUpload.completeURL=function(a){if(typeof a!="string"||a.match(/^https?:\/\//i)||a.match(/^\//))return a;var b=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),c=window.location.pathname.lastIndexOf("/");return c<=0?path="/":path=window.location.pathname.substr(0,c)+"/",path+a},SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(a,b){this.settings[a]=this.settings[a]==undefined?b:this.settings[a]},this.ensureDefault("upload_url",""),this.ensureDefault("preserve_relative_urls",!1),this.ensureDefault("file_post_name","Filedata"),this.ensureDefault("post_params",{}),this.ensureDefault("use_query_string",!1),this.ensureDefault("requeue_on_error",!1),this.ensureDefault("http_success",[]),this.ensureDefault("assume_success_timeout",0),this.ensureDefault("file_types","*.*"),this.ensureDefault("file_types_description","All Files"),this.ensureDefault("file_size_limit",0),this.ensureDefault("file_upload_limit",0),this.ensureDefault("file_queue_limit",0),this.ensureDefault("flash_url","swfupload.swf"),this.ensureDefault("prevent_swf_caching",!0),this.ensureDefault("button_image_url",""),this.ensureDefault("button_width",1),this.ensureDefault("button_height",1),this.ensureDefault("button_text",""),this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;"),this.ensureDefault("button_text_top_padding",0),this.ensureDefault("button_text_left_padding",0),this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES),this.ensureDefault("button_disabled",!1),this.ensureDefault("button_placeholder_id",""),this.ensureDefault("button_placeholder",null),this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW),this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW),this.ensureDefault("debug",!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault("swfupload_loaded_handler",null),this.ensureDefault("file_dialog_start_handler",null),this.ensureDefault("file_queued_handler",null),this.ensureDefault("file_queue_error_handler",null),this.ensureDefault("file_dialog_complete_handler",null),this.ensureDefault("upload_start_handler",null),this.ensureDefault("upload_progress_handler",null),this.ensureDefault("upload_error_handler",null),this.ensureDefault("upload_success_handler",null),this.ensureDefault("upload_complete_handler",null),this.ensureDefault("debug_handler",this.debugMessage),this.ensureDefault("custom_settings",{}),this.customSettings=this.settings.custom_settings,!this.settings.prevent_swf_caching||(this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime()),this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)),delete this.ensureDefault},SWFUpload.prototype.loadFlash=function(){var a,b;if(document.getElementById(this.movieName)!==null)throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(a==undefined)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;b=document.createElement("div"),b.innerHTML=this.getFlashHTML(),a.parentNode.replaceChild(b.firstChild,a),window[this.movieName]==undefined&&(window[this.movieName]=this.getMovieElement())},SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},SWFUpload.prototype.getFlashVars=function(){var a=this.buildParamString(),b=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(b),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(a),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")},SWFUpload.prototype.getMovieElement=function(){this.movieElement==undefined&&(this.movieElement=document.getElementById(this.movieName));if(this.movieElement===null)throw"Could not find Flash element";return this.movieElement},SWFUpload.prototype.buildParamString=function(){var a=this.settings.post_params,b=[];if(typeof a=="object")for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c.toString())+"="+encodeURIComponent(a[c].toString()));return b.join("&amp;")},SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var a=null;a=this.getMovieElement();if(a&&typeof a.CallFunction=="unknown"){for(var b in a)try{typeof a[b]=="function"&&(a[b]=null)}catch(c){}try{a.parentNode.removeChild(a)}catch(d){}}return window[this.movieName]=null,SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],this.movieElement=null,this.settings=null,this.customSettings=null,this.eventQueue=null,this.movieName=null,!0}catch(e){return!1}},SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","	","upload_url:               ",this.settings.upload_url,"\n","	","flash_url:                ",this.settings.flash_url,"\n","	","use_query_string:         ",this.settings.use_query_string.toString(),"\n","	","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","	","http_success:             ",this.settings.http_success.join(", "),"\n","	","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","	","file_post_name:           ",this.settings.file_post_name,"\n","	","post_params:              ",this.settings.post_params.toString(),"\n","	","file_types:               ",this.settings.file_types,"\n","	","file_types_description:   ",this.settings.file_types_description,"\n","	","file_size_limit:          ",this.settings.file_size_limit,"\n","	","file_upload_limit:        ",this.settings.file_upload_limit,"\n","	","file_queue_limit:         ",this.settings.file_queue_limit,"\n","	","debug:                    ",this.settings.debug.toString(),"\n","	","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","	","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","	","button_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n","	","button_image_url:         ",this.settings.button_image_url.toString(),"\n","	","button_width:             ",this.settings.button_width.toString(),"\n","	","button_height:            ",this.settings.button_height.toString(),"\n","	","button_text:              ",this.settings.button_text.toString(),"\n","	","button_text_style:        ",this.settings.button_text_style.toString(),"\n","	","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","	","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","	","button_action:            ",this.settings.button_action.toString(),"\n","	","button_disabled:          ",this.settings.button_disabled.toString(),"\n","	","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","	","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler=="function").toString(),"\n","	","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler=="function").toString(),"\n","	","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler=="function").toString(),"\n","	","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler=="function").toString(),"\n","	","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler=="function").toString(),"\n","	","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler=="function").toString(),"\n","	","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler=="function").toString(),"\n","	","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler=="function").toString(),"\n","	","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler=="function").toString(),"\n","	","debug_handler assigned:             ",(typeof this.settings.debug_handler=="function").toString(),"\n"].join(""))},SWFUpload.prototype.addSetting=function(a,b,c){return b==undefined?this.settings[a]=c:this.settings[a]=b},SWFUpload.prototype.getSetting=function(a){return this.settings[a]!=undefined?this.settings[a]:""},SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement(),returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>"),returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}return returnValue!=undefined&&typeof returnValue.post=="object"&&(returnValue=this.unescapeFilePostParams(returnValue)),returnValue},SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")},SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")},SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])},SWFUpload.prototype.cancelUpload=function(a,b){b!==!1&&(b=!0),this.callFlash("CancelUpload",[a,b])},SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")},SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")},SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])},SWFUpload.prototype.getFile=function(a){return typeof a=="number"?this.callFlash("GetFileByIndex",[a]):this.callFlash("GetFile",[a])},SWFUpload.prototype.addFileParam=function(a,b,c){return this.callFlash("AddFileParam",[a,b,c])},SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])},SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString(),this.callFlash("SetUploadURL",[a])},SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a,this.callFlash("SetPostParams",[a])},SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b,this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a],this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a,this.settings.file_types_description=b,this.callFlash("SetFileTypes",[a,b])},SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a,this.callFlash("SetFileSizeLimit",[a])},SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a,this.callFlash("SetFileUploadLimit",[a])},SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a,this.callFlash("SetFileQueueLimit",[a])},SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a,this.callFlash("SetFilePostName",[a])},SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a,this.callFlash("SetUseQueryString",[a])},SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a,this.callFlash("SetRequeueOnError",[a])},SWFUpload.prototype.setHTTPSuccess=function(a){typeof a=="string"&&(a=a.replace(" ","").split(",")),this.settings.http_success=a,this.callFlash("SetHTTPSuccess",[a])},SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a,this.callFlash("SetAssumeSuccessTimeout",[a])},SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a,this.callFlash("SetDebugEnabled",[a])},SWFUpload.prototype.setButtonImageURL=function(a){a==undefined&&(a=""),this.settings.button_image_url=a,this.callFlash("SetButtonImageURL",[a])},SWFUpload.prototype.setButtonDimensions=function(a,b){this.settings.button_width=a,this.settings.button_height=b;var c=this.getMovieElement();c!=undefined&&(c.style.width=a+"px",c.style.height=b+"px"),this.callFlash("SetButtonDimensions",[a,b])},SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a,this.callFlash("SetButtonText",[a])},SWFUpload.prototype.setButtonTextPadding=function(a,b){this.settings.button_text_top_padding=b,this.settings.button_text_left_padding=a,this.callFlash("SetButtonTextPadding",[a,b])},SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a,this.callFlash("SetButtonTextStyle",[a])},SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a,this.callFlash("SetButtonDisabled",[a])},SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a,this.callFlash("SetButtonAction",[a])},SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a,this.callFlash("SetButtonCursor",[a])},SWFUpload.prototype.queueEvent=function(a,b){b==undefined?b=[]:b instanceof Array||(b=[b]);var c=this;if(typeof this.settings[a]=="function")this.eventQueue.push(function(){this.settings[a].apply(this,b)}),setTimeout(function(){c.executeNextEvent()},0);else if(this.settings[a]!==null)throw"Event handler "+a+" is unknown or is not a function"},SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;typeof a=="function"&&a.apply(this)},SWFUpload.prototype.unescapeFilePostParams=function(a){var b=/[$]([0-9a-f]{4})/i,c={},d;if(a!=undefined){for(var e in a.post)if(a.post.hasOwnProperty(e)){d=e;var f;while((f=b.exec(d))!==null)d=d.replace(f[0],String.fromCharCode(parseInt("0x"+f[1],16)));c[d]=a.post[e]}a.post=c}return a},SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return!1}},SWFUpload.prototype.flashReady=function(){var a=this.getMovieElement();if(!a){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(a),this.queueEvent("swfupload_loaded_handler")},SWFUpload.prototype.cleanUp=function(a){try{if(this.movieElement&&typeof a.CallFunction=="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var b in a)try{typeof a[b]=="function"&&(a[b]=null)}catch(c){}}}catch(d){}window.__flash__removeCallback=function(a,b){try{a&&(a[b]=null)}catch(c){}}},SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")},SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a),this.queueEvent("file_queued_handler",a)},SWFUpload.prototype.fileQueueError=function(a,b,c){a=this.unescapeFilePostParams(a),this.queueEvent("file_queue_error_handler",[a,b,c])},SWFUpload.prototype.fileDialogComplete=function(a,b,c){this.queueEvent("file_dialog_complete_handler",[a,b,c])},SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a),this.queueEvent("return_upload_start_handler",a)},SWFUpload.prototype.returnUploadStart=function(a){var b;if(typeof this.settings.upload_start_handler=="function")a=this.unescapeFilePostParams(a),b=this.settings.upload_start_handler.call(this,a);else if(this.settings.upload_start_handler!=undefined)throw"upload_start_handler must be a function";b===undefined&&(b=!0),b=!!b,this.callFlash("ReturnUploadStart",[b])},SWFUpload.prototype.uploadProgress=function(a,b,c){a=this.unescapeFilePostParams(a),this.queueEvent("upload_progress_handler",[a,b,c])},SWFUpload.prototype.uploadError=function(a,b,c){a=this.unescapeFilePostParams(a),this.queueEvent("upload_error_handler",[a,b,c])},SWFUpload.prototype.uploadSuccess=function(a,b,c){a=this.unescapeFilePostParams(a),this.queueEvent("upload_success_handler",[a,b,c])},SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a),this.queueEvent("upload_complete_handler",a)},SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)},SWFUpload.prototype.debugMessage=function(a){if(this.settings.debug){var b,c=[];if(typeof a=="object"&&typeof a.name=="string"&&typeof a.message=="string"){for(var d in a)a.hasOwnProperty(d)&&c.push(d+": "+a[d]);b=c.join("\n")||"",c=b.split("\n"),b="EXCEPTION: "+c.join("\nEXCEPTION: "),SWFUpload.Console.writeLine(b)}else SWFUpload.Console.writeLine(a)}},SWFUpload.Console={},SWFUpload.Console.writeLine=function(a){var b,c;try{b=document.getElementById("SWFUpload_Console"),b||(c=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(c),b=document.createElement("textarea"),b.id="SWFUpload_Console",b.style.fontFamily="monospace",b.setAttribute("wrap","off"),b.wrap="off",b.style.overflow="auto",b.style.width="700px",b.style.height="350px",b.style.margin="5px",c.appendChild(b)),b.value+=a+"\n",b.scrollTop=b.scrollHeight-b.clientHeight}catch(d){alert("Exception: "+d.name+" Message: "+d.message)}},function(a){var b={init:function(b,d){return this.each(function(){var f=a(this),g=f.clone(),h=a.extend({id:f.attr("id"),swf:"uploadify.swf",uploader:"uploadify.php",auto:!0,buttonClass:"",buttonCursor:"hand",buttonImage:null,buttonText:"SELECT FILES",checkExisting:!1,debug:!1,fileObjName:"Filedata",fileSizeLimit:0,fileTypeDesc:"All Files",fileTypeExts:"*.*",height:30,method:"post",multi:!0,formData:{},preventCaching:!0,progressData:"percentage",queueID:!1,queueSizeLimit:999,removeCompleted:!0,removeTimeout:3,requeueErrors:!1,successTimeout:30,uploadLimit:0,width:120,overrideEvents:[]},b),i={assume_success_timeout:h.successTimeout,button_placeholder_id:h.id,button_width:h.width,button_height:h.height,button_text:null,button_text_style:null,button_text_top_padding:0,button_text_left_padding:0,button_action:h.multi?SWFUpload.BUTTON_ACTION.SELECT_FILES:SWFUpload.BUTTON_ACTION.SELECT_FILE,button_disabled:!1,button_cursor:h.buttonCursor=="arrow"?SWFUpload.CURSOR.ARROW:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,debug:h.debug,requeue_on_error:h.requeueErrors,file_post_name:h.fileObjName,file_size_limit:h.fileSizeLimit,file_types:h.fileTypeExts,file_types_description:h.fileTypeDesc,file_queue_limit:h.queueSizeLimit,file_upload_limit:h.uploadLimit,flash_url:h.swf,prevent_swf_caching:h.preventCaching,post_params:h.formData,upload_url:h.uploader,use_query_string:h.method=="get",file_dialog_complete_handler:c.onDialogClose,file_dialog_start_handler:c.onDialogOpen,file_queued_handler:c.onSelect,file_queue_error_handler:c.onSelectError,swfupload_loaded_handler:h.onSWFReady,upload_complete_handler:c.onUploadComplete,upload_error_handler:c.onUploadError,upload_progress_handler:c.onUploadProgress,upload_start_handler:c.onUploadStart,upload_success_handler:c.onUploadSuccess};d&&(i=a.extend(i,d)),i=a.extend(i,h);var j=swfobject.getFlashPlayerVersion(),k=j.major>=9;if(k){window["uploadify_"+h.id]=new SWFUpload(i);var l=window["uploadify_"+h.id];f.data("uploadify",l);var m=a("<div />",{id:h.id,"class":"uploadify",css:{height:h.height+"px",width:h.width+"px"}});a("#"+l.movieName).wrap(m),m=a("#"+h.id),m.data("uploadify",l);var n=a("<div />",{id:h.id+"-button","class":"uploadify-button "+h.buttonClass});h.buttonImage&&n.css({"background-image":"url('"+h.buttonImage+"')","text-indent":"-9999px"}),n.html('<span class="uploadify-button-text">'+h.buttonText+"</span>").css({height:h.height+"px","line-height":h.height+"px",width:h.width+"px"}),m.append(n),a("#"+l.movieName).css({position:"absolute","z-index":1});if(!h.queueID){var o=a("<div />",{id:h.id+"-queue","class":"uploadify-queue"});m.after(o),l.settings.queueID=h.id+"-queue",l.settings.defaultQueue=!0}l.queueData={files:{},filesSelected:0,filesQueued:0,filesReplaced:0,filesCancelled:0,filesErrored:0,uploadsSuccessful:0,uploadsErrored:0,averageSpeed:0,queueLength:0,queueSize:0,uploadSize:0,queueBytesUploaded:0,uploadQueue:[],errorMsg:"Some files were not added to the queue:"},l.original=g,l.wrapper=m,l.button=n,l.queue=o,h.onInit&&h.onInit.call(f,l)}else h.onFallback&&h.onFallback.call(f)})},cancel:function(b,c){var d=arguments;this.each(function(){var b=a(this),c=b.data("uploadify"),f=c.settings,g=-1;if(d[0])if(d[0]=="*"){var h=c.queueData.queueLength;a("#"+f.queueID).find(".uploadify-queue-item").each(function(){g++,d[1]===!0?c.cancelUpload(a(this).attr("id"),!1):c.cancelUpload(a(this).attr("id")),a(this).find(".data").removeClass("data").html(" - Cancelled"),a(this).find(".uploadify-progress-bar").remove(),a(this).delay(1e3+100*g).fadeOut(500,function(){a(this).remove()})}),c.queueData.queueSize=0,c.queueData.queueLength=0,f.onClearQueue&&f.onClearQueue.call(b,h)}else for(var i=0;i<d.length;i++)c.cancelUpload(d[i]),a("#"+d[i]).find(".data").removeClass("data").html(" - Cancelled"),a("#"+d[i]).find(".uploadify-progress-bar").remove(),a("#"+d[i]).delay(1e3+100*i).fadeOut(500,function(){a(this).remove()});else{var j=a("#"+f.queueID).find(".uploadify-queue-item").get(0);$item=a(j),c.cancelUpload($item.attr("id")),$item.find(".data").removeClass("data").html(" - Cancelled"),$item.find(".uploadify-progress-bar").remove(),$item.delay(1e3).fadeOut(500,function(){a(this).remove()})}})},destroy:function(){this.each(function(){var b=a(this),c=b.data("uploadify"),d=c.settings;c.destroy(),d.defaultQueue&&a("#"+d.queueID).remove(),a("#"+d.id).replaceWith(c.original),d.onDestroy&&d.onDestroy.call(this),delete c})},disable:function(b){this.each(function(){var c=a(this),e=c.data("uploadify"),f=e.settings;b?(e.button.addClass("disabled"),f.onDisable&&f.onDisable.call(this)):(e.button.removeClass("disabled"),f.onEnable&&f.onEnable.call(this)),e.setButtonDisabled(b)})},settings:function(b,c,d){var e=arguments,f=c;this.each(function(){var i=a(this),j=i.data("uploadify"),k=j.settings;if(typeof e[0]=="object")for(var l in c)setData(l,c[l]);if(e.length===1)f=k[b];else{switch(b){case"uploader":j.setUploadURL(c);break;case"formData":d||(c=a.extend(k.formData,c)),j.setPostParams(k.formData);break;case"method":c=="get"?j.setUseQueryString(!0):j.setUseQueryString(!1);break;case"fileObjName":j.setFilePostName(c);break;case"fileTypeExts":j.setFileTypes(c,k.fileTypeDesc);break;case"fileTypeDesc":j.setFileTypes(k.fileTypeExts,c);break;case"fileSizeLimit":j.setFileSizeLimit(c);break;case"uploadLimit":j.setFileUploadLimit(c);break;case"queueSizeLimit":j.setFileQueueLimit(c);break;case"buttonImage":j.button.css("background-image",settingValue);break;case"buttonCursor":c=="arrow"?j.setButtonCursor(SWFUpload.CURSOR.ARROW):j.setButtonCursor(SWFUpload.CURSOR.HAND);break;case"buttonText":a("#"+k.id+"-button").find(".uploadify-button-text").html(c);break;case"width":j.setButtonDimensions(c,k.height);break;case"height":j.setButtonDimensions(k.width,c);break;case"multi":c?j.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILES):j.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILE)}k[b]=c}});if(e.length===1)return f},stop:function(){this.each(function(){var b=a(this),c=b.data("uploadify");c.queueData.averageSpeed=0,c.queueData.uploadSize=0,c.queueData.bytesUploaded=0,c.queueData.uploadQueue=[],c.stopUpload()})},upload:function(){var b=arguments;this.each(function(){var c=a(this),e=c.data("uploadify");e.queueData.averageSpeed=0,e.queueData.uploadSize=0,e.queueData.bytesUploaded=0,e.queueData.uploadQueue=[];if(b[0])if(b[0]=="*")e.queueData.uploadSize=e.queueData.queueSize,e.queueData.uploadQueue.push("*"),e.startUpload();else{for(var f=0;f<b.length;f++)e.queueData.uploadSize+=e.queueData.files[b[f]].size,e.queueData.uploadQueue.push(b[f]);e.startUpload(e.queueData.uploadQueue.shift())}else e.startUpload()})}},c={onDialogOpen:function(){var a=this.settings;this.queueData.errorMsg="Some files were not added to the queue:",this.queueData.filesReplaced=0,this.queueData.filesCancelled=0,a.onDialogOpen&&a.onDialogOpen.call(this)},onDialogClose:function(b,c,d){var e=this.settings;this.queueData.filesErrored=b-c,this.queueData.filesSelected=b,this.queueData.filesQueued=c-this.queueData.filesCancelled,this.queueData.queueLength=d,a.inArray("onDialogClose",e.overrideEvents)<0&&this.queueData.filesErrored>0&&alert(this.queueData.errorMsg),e.onDialogClose&&e.onDialogClose.call(this,this.queueData),e.auto&&a("#"+e.id).uploadify("upload","*")},onSelect:function(b){var c=this.settings,d={};for(var e in this.queueData.files){d=this.queueData.files[e];if(d.uploaded!=1&&d.name==b.name){var f=confirm('The file named "'+b.name+'" is already in the queue.\nDo you want to replace the existing item in the queue?');if(!f)return this.cancelUpload(b.id),this.queueData.filesCancelled++,!1;a("#"+d.id).remove(),this.cancelUpload(d.id),this.queueData.filesReplaced++}}var g=Math.round(b.size/1024),h="KB";g>1e3&&(g=Math.round(g/1e3),h="MB");var i=g.toString().split(".");g=i[0],i.length>1&&(g+="."+i[1].substr(0,2)),g+=h;var j=b.name;j.length>25&&(j=j.substr(0,25)+"..."),a.inArray("onSelect",c.overrideEvents)<0&&a("#"+c.queueID).append('<div id="'+b.id+'" class="uploadify-queue-item">					<div class="cancel">						<a href="javascript:$(\'#'+c.id+"').uploadify('cancel', '"+b.id+'\')">X</a>					</div>					<span class="fileName">'+j+" ("+g+')</span><span class="data"></span>					<div class="uploadify-progress">						<div class="uploadify-progress-bar"><!--Progress Bar--></div>					</div>				</div>'),this.queueData.queueSize+=b.size,this.queueData.files[b.id]=b,c.onSelect&&c.onSelect.apply(this,arguments)},onSelectError:function(b,c,d){var e=this.settings;if(a.inArray("onSelectError",e.overrideEvents)<0)switch(c){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:e.queueSizeLimit>d?this.queueData.errorMsg+="\nThe number of files selected exceeds the remaining upload limit ("+d+").":this.queueData.errorMsg+="\nThe number of files selected exceeds the queue size limit ("+e.queueSizeLimit+").";break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\nThe file "'+b.name+'" exceeds the size limit ('+e.fileSizeLimit+").";break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:this.queueData.errorMsg+='\nThe file "'+b.name+'" is empty.';break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\nThe file "'+b.name+'" is not an accepted file type ('+e.fileTypeDesc+")."}c!=SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED&&delete this.queueData.files[b.id],e.onSelectError&&e.onSelectError.apply(this,arguments)},onQueueComplete:function(){this.settings.onQueueComplete&&this.settings.onQueueComplete.call(this,this.settings.queueData)},onUploadComplete:function(b){var c=this.settings,d=this,e=this.getStats();this.queueData.queueLength=e.files_queued,this.queueData.uploadQueue[0]=="*"?this.queueData.queueLength>0?this.startUpload():(this.queueData.uploadQueue=[],c.onQueueComplete&&c.onQueueComplete.call(this,this.queueData)):this.queueData.uploadQueue.length>0?this.startUpload(this.queueData.uploadQueue.shift()):(this.queueData.uploadQueue=[],c.onQueueComplete&&c.onQueueComplete.call(this,this.queueData));if(a.inArray("onUploadComplete",c.overrideEvents)<0)if(c.removeCompleted)switch(b.filestatus){case SWFUpload.FILE_STATUS.COMPLETE:setTimeout(function(){a("#"+b.id)&&(d.queueData.queueSize-=b.size,d.queueData.queueLength-=1,delete d.queueData.files[b.id],a("#"+b.id).fadeOut(500,function(){a(this).remove()}))},c.removeTimeout*1e3);break;case SWFUpload.FILE_STATUS.ERROR:c.requeueErrors||setTimeout(function(){a("#"+b.id)&&(d.queueData.queueSize-=b.size,d.queueData.queueLength-=1,delete d.queueData.files[b.id],a("#"+b.id).fadeOut(500,function(){a(this).remove()}))},c.removeTimeout*1e3)}else b.uploaded=!0;c.onUploadComplete&&c.onUploadComplete.call(this,b)},onUploadError:function(b,c,d){var e=this.settings,f="Error";switch(c){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:f="HTTP Error ("+d+")";break;case SWFUpload.UPLOAD_ERROR.MISSING_UPLOAD_URL:f="Missing Upload URL";break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:f="IO Error";break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:f="Security Error";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:alert("The upload limit has been reached ("+d+")."),f="Exceeds Upload Limit";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:f="Failed";break;case SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND:break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:f="Validation Error";break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:f="Cancelled",this.queueData.queueSize-=b.size,this.queueData.queueLength-=1;if(b.status==SWFUpload.FILE_STATUS.IN_PROGRESS||a.inArray(b.id,this.queueData.uploadQueue)>=0)this.queueData.uploadSize-=b.size;e.onCancel&&e.onCancel.call(this,b),delete this.queueData.files[b.id];break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:f="Stopped"}a.inArray("onUploadError",e.overrideEvents)<0&&(c!=SWFUpload.UPLOAD_ERROR.FILE_CANCELLED&&c!=SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED&&a("#"+b.id).addClass("uploadify-error"),a("#"+b.id).find(".uploadify-progress-bar").css("width","1px"),c!=SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND&&b.status!=SWFUpload.FILE_STATUS.COMPLETE&&a("#"+b.id).find(".data").html(" - "+f));var g=this.getStats();this.queueData.uploadsErrored=g.upload_errors,e.onUploadError&&e.onUploadError.call(this,b,c,d,f)},onUploadProgress:function(b,c,d){var e=this.settings,f=new Date,g=f.getTime(),h=g-this.timer;h>500&&(this.timer=g);var i=c-this.bytesLoaded;this.bytesLoaded=c;var j=this.queueData.queueBytesUploaded+c,k=Math.round(c/d*100),l="KB/s",m=0,n=i/1024/(h/1e3);n=Math.floor(n*10)/10,this.queueData.averageSpeed>0?this.queueData.averageSpeed=Math.floor((this.queueData.averageSpeed+n)/2):this.queueData.averageSpeed=Math.floor(n),n>1e3&&(m=n*.001,this.queueData.averageSpeed=Math.floor(m),l="MB/s"),a.inArray("onUploadProgress",e.overrideEvents)<0&&(e.progressData=="percentage"?a("#"+b.id).find(".data").html(" - "+k+"%"):e.progressData=="speed"&&h>500&&a("#"+b.id).find(".data").html(" - "+this.queueData.averageSpeed+l),a("#"+b.id).find(".uploadify-progress-bar").css("width",k+"%")),e.onUploadProgress&&e.onUploadProgress.call(this,b,c,d,j,this.queueData.uploadSize)},onUploadStart:function(b){var c=this.settings,d=new Date;this.timer=d.getTime(),this.bytesLoaded=0,this.queueData.uploadQueue.length==0&&(this.queueData.uploadSize=b.size),c.checkExisting&&a.ajax({type:"POST",async:!1,url:c.checkExisting,data:{filename:b.name},success:function(c){if(c==1){var d=confirm('A file with the name "'+b.name+'" already exists on the server.\nWould you like to replace the existing file?');d||(this.cancelUpload(b.id),a("#"+b.id).remove(),this.queueData.uploadQueue.length>0&&this.queueData.queueLength>0&&(this.queueData.uploadQueue[0]=="*"?this.startUpload():this.startUpload(this.queueData.uploadQueue.shift())))}}}),c.onUploadStart&&c.onUploadStart.call(this,b)},onUploadSuccess:function(b,c,d){var e=this.settings,f=this.getStats();this.queueData.uploadsSuccessful=f.successful_uploads,this.queueData.queueBytesUploaded+=b.size,a.inArray("onUploadSuccess",e.overrideEvents)<0&&a("#"+b.id).find(".data").html(" - Complete"),e.onUploadSuccess&&e.onUploadSuccess.call(this,b,c,d)}};a.fn.uploadify=function(c){if(b[c])return b[c].apply(this,Array.prototype.slice.call(arguments,1));if(typeof c=="object"||!c)return b.init.apply(this,arguments);a.error("The method "+c+" does not exist in $.uploadify")}}($),define("uploadify",function(){}),define("use!uploadify",["jquery"],function(){return window.$}),define("full_files",["underscore","INST","i18n!files","jquery","str/htmlEscape","compiled/tinymce","tinymce.editor_box","jqueryui/draggable","jquery.ajaxJSON","jquery.doc_previews","jquery.inst_tree","jquery.instructure_date_and_time","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","jquery.keycodes","jquery.loadingImg","jquery.scrollToVisible","jquery.templateData","media_comments","vendor/jquery.scrollTo","jqueryui/droppable","jqueryui/progressbar","vendor/scribd.view"],function(a,b,c,d,e){var f={},g=[];(function(){var i=d("#files_content"),j=d("#swfupload_holder"),k=d("#add_file_link"),l=d("#files_structure"),m=d("#files_structure_list");d.extend(f,{canManageAContext:!1,init:function(){i=d("#files_content"),j=d("#swfupload_holder"),k=d("#add_file_link"),l=d("#files_structure"),m=d("#files_structure_list"),i.prepend(j),f.clearDataCache.cacheIndex=0;for(var a in contexts){var b={context:contexts[a],context_name:contexts[a].name,context_string:contexts[a].asset_string};if(contexts[a].asset_string){var n=contexts[a].asset_string.replace(/_\d+$/,"");b[n]=contexts[a]}g.push([b,{}])}for(var a in g)if(g[a]){var o=g[a][0],n=null,p=null,q=null;for(var r in o)o[r]&&r!="context_string"&&r!="context_name"&&r!="context"&&(n=r,p=o[r].name,q=o[r]);g[a][0].context_string=n+"_"+o[n].id,g[a][0].context_name=p,g[a][0].context=q,q&&q.permissions&&q.permissions.manage_files&&(f.canManageAContext=!0)}i.append(d("#drag_n_drop_panel")),i.append(d("#content_templates .content_panel").hide()),d.handlesHTML5Files&&i.bind("dragenter dragover",function(a){a.preventDefault(),a.stopPropagation();var b=f.currentItemData();if(!b||b.mime_class!="folder")return;d(this).addClass("file_drag"),d("#drag_n_drop_panel").css("top",i.scrollTop())}).bind("dragleave dragout",function(a){d(this).closest(".drag_panel").length||d(this).removeClass("file_drag")}).bind("drop",function(a){var b=a.originalEvent.dataTransfer;if(b){var g=f.currentItemData();a.preventDefault(),a.stopPropagation(),d(this).removeClass("file_drag");if(!g||g.mime_class!="folder")return;var i=[],j=b.files;for(var k=0;k<j.length;k++)j[k]&&j[k].size>0&&i.push(j[k]);if(i.length===0){alert(c.t("messages.no_files_selected","No valid files were selected"));return}var l=!1;i.length==1&&i[0].type.match(/application\/(x-)?zip/)&&(l=confirm(c.t("prompts.extract_zip","This file is a zip file.  Do you want to extract its contents into this folder?")));if(l){var m=i[0];g.context_string;var n=d("."+g.context_string+"_zip_import_url").attr("href"),o={folder_id:g.id,zip_file:i[0],format:"json"},p=null,q=d("<div/>");q.append("Uploading and extracting <b>"+e(m.name)+"</b><br/>to "+e(g.name)+"..."),q.append("<div class='progress'/>");var r=q.find(".progress");r.css("margin","10px"),r.progressbar(),q.dialog({title:c.t("titles.extracting","Extracting Files into Folder"),close:function(){q.data("closed",!0),setTimeout(function(){q.detach()},500)}});var s=function(a){q.text(c.t("errors.extracting","There were errors extracting the zip file.  Please try again."));var b=d("<ul/>");for(var e in a){var f=a[e],g=d("<li/>");g.text(f),b.append(g)}q.append(b)},t=function(a){var b=d("#file_context_links ."+g.context_string+"_zip_import_status_url").attr("href");b=d.replaceTags(b,"id",a),d.ajaxJSON(b,"GET",{},function(b){var d=b.zip_file_import;if(q.data("closed"))return;d&&d.data&&d.data.errors?s(d.data.errors):d&&d.workflow_state=="imported"?(r.progressbar("value",100),q.append(c.t("messages.extraction_complete","Extraction complete!  Updating...")),f.refreshContext(g.context_string,function(){q.dialog("close")})):d?d&&d.workflow_state=="failed"?s([]):(t.errorCount=0,setTimeout(function(){t(a)},2e3),r.progressbar("value",(d.progress||0)*100)):(t.blankCount=t.blankCount||0,t.blankCount++,t.blankCount>30?s([c.t("errors.server_returned_invalid_status","The server stopped returning a valid status")]):setTimeout(function(){t(a)},2e3))},function(b){t.errorCount=t.errorCount||0,t.errorCount++,t.errorCount>5?s([c.t("errors.server_unresponsive","The server stopped responding to status requests")]):setTimeout(function(){t(a)},2e3)})};d.ajaxFileUpload({url:n,data:o,method:"POST",success:function(a){zip_import_id=a.zip_file_import.id,t(zip_import_id)},error:function(a){q.text(c.t("errors.uploading_zip","There were errors uploading the zip file."))}})}else{var g=f.currentItemData(),u=[];for(k in i)u.push(i[k].name);f.preflight(g.id,g.context_string,u,function(a){for(k in i)i[k].duplicate_handling=a},function(){for(var a in i)h.queueAjaxUpload(i[a])},function(){})}return!1}})},preflight:function(a,b,f,g,h,i){var j={folder_id:a,context_code:b,filenames:f};d.ajaxJSON("/files/preflight","GET",j,function(a){if(a.duplicates&&a.duplicates.length>0){var b=d("#duplicate_filename_dialog");b.find(".duplicate_filename_prompt").text(c.t("prompts.duplicate_filenames","Files with the following names already exist in this folder. Do you want to replace them, or rename the new files with unique names?"));var f="";for(idx in a.duplicates)f+="<span class='duplicate_filename'>"+e(a.duplicates[idx])+"</span>";b.find(".duplicate_filenames").html(f),b.dialog({title:"",width:500}),b.find("button").unbind("click"),b.find(".cancel_button").click(function(){i(),b.dialog("close")}),b.find(".rename_button").click(function(){g("rename"),h(),b.dialog("close")}),b.find(".overwrite_button").click(function(){g("overwrite"),h(),b.dialog("close")})}else h()},function(a){i()})},context_page_view_ids:{},updatePageView:function(a){return},viewInlinePingUrl:function(a,b){var c=d("#file_context_links ."+a+"_inline_view_attachment_url").attr("href");return c=d.replaceTags(c,"id",b),c},scribdRenderUrl:function(a,b){var c=d("#file_context_links ."+a+"_scribd_render_url").attr("href");return c=d.replaceTags(c,"id",b),c},selectFolder:function(a){if(!f.selectFolder.forceRefresh&&(a.hasClass("active-node")||a.hasClass("active-leaf")))return;f.selectFolder.forceRefresh=!1;var b=a;while(b.parent("ul").parent("li").length>0)b=b.parent("ul").parent("li"),f.expandFolder(b);a.children(".text:visible:first").click(),l.find("li.node.active-node,li.leaf.active-leaf").length===0&&l.find("li.node:visible:first").children(".text:visible:first").click();if(!f.currentItemData()){setTimeout(function(){f.selectFolder(a)},250);return}!f.currentItemData().includes_files&&f.currentItemData().full_name&&f.getFilesForFolder(f.currentItemData())},deleteAttachmentIds:function(a){for(var b in a){var c=a[b],e=d("#files_structure .file_"+c);e.prev("li.separator").remove(),e.remove(),f.refreshView(),f.updateQuota()}},gettingFiles:{},getFilesForFolder:function(b,c){var e=b.context_string+"_"+b.id;if(f.gettingFiles[e])return;var g=l.find("li.folder_"+b.id);if(g.hasClass("folder_locked")&&(!b.context||!b.context.permissions||!b.context.permissions.manage_files))return;if(b.false_folder){f.refreshContext(b.context_string,function(){f.getFilesForFolder(b,c)});return}f.gettingFiles[e]=!0;var h=d.replaceTags(d("#file_context_links ."+b.context_string+"_folder_url").attr("href"),"id",b.id);d.ajaxJSON(h,"GET",{},function(g){f.gettingFiles[e]=!1;var h=g.actual_folder.folder;h.includes_files=!0,f.updateFolder(b.context_string,{folder:h,already_in_place:!0},!1),g.files=a.sortBy(g.files,function(a){return(a.attachment.display_name||"").toLowerCase()});for(var j in g.files){var m=g.files[j].attachment;m&&f.updateFile(b.context_string,{attachment:m,definitely_new:!0},!1)}l.find(".folder_"+h.id).triggerHandler("files_load");var n=i.find(".message.no_content:visible").length>0;if(c!==!1||n)c&&d.isFunction(c)?c(g):f.refreshView();k.triggerHandler("show")},function(a){f.gettingFiles[e]=!1})},expandFolder:function(a){m[0]&&m[0].ExpandNode&&m[0].ExpandNode(d("#files_structure_list"),a)},collapseFolder:function(a){m[0]&&m[0].CollapseNode&&m[0].CollapseNode(d("#files_structure_list"),a)},fullPath:function(a){var b=[],c=f.itemData(a);b.unshift(c.name.replace(/\//g,"//"));while(a.parent("ul").parent("li").length>0)a=a.parent("ul").parent("li"),c=f.itemData(a),b.unshift(c.name.replace(/\//g,"//"));return b.join("/")},selectNodeFromPath:function(a){var b=f.nodeFromPath(a);f.selectFolder(b);var c=function(){b.unbind("files_load",c),b.hasClass("active-node")&&f.selectNodeFromPath(a)};b.bind("files_load",c),l.find(".node.active-node,.leaf.active-leaf").length===0&&f.selectFolder(l.find(".node:visible:first"))},nodeFromPath:function(a){var b=a.replace(/\/\//g,"\\").split("/"),c=l,e=!0;for(var f in b){var g=b[f].replace(/\\\\/g,"/"),h=!1;e&&c.children("ul").children("li").each(function(){if(d(this).children(".text.name").text()==g)return c=d(this),h=!0,!1}),e=h}return c},draggable_helper:function(a,b){if(!d(this).hasClass("folder_item")){var c=b.width();return b.clone().css("backgroundColor","#eeeeee").css("height",50).css("borderWidth",1).css("borderStyle","solid").css("borderColor","#ccc").css("width",c-50)}b=d(this);var e=b.clone().attr("id","file_drag");e.find(".header .sub_header").remove(),e.find(".header").append("<div class='sub_header'/>"),e.find(".header .sub_header").html("&nbsp;"),e.addClass("file_drag"),e.find(".links").remove(),e.css("width",100);var f=d("<ul/>");return f.addClass("files_content"),f.append(e),f.addClass("true-draggable"),f.css("width",200),f.css("height",50),d("#content").append(f),f},updateQuota:function(){if(!d("#quota").length)return;var a=d(".quota_url").attr("href");d.ajaxJSON(a,"GET",{},function(a){d("#quota").text(a.quota),d("#quota_used").text(a.quota_used)},function(){})}}),d.extend(f,{draggable_options:{handle:".draggable.item_icon",distance:5,helper:f.draggable_helper,start:function(a,b){i.addClass("dragging")},stop:function(){setTimeout(function(){i.removeClass("dragging")},500)}},droppable_options:{accept:".file,.folder",hoverClass:"drop_target",tolerance:"pointer",drop:function(a,b){if(!d(b.helper).hasClass("true-draggable"))return;var c=d(b.draggable),e=f.itemData(c),g=d(this),h=f.itemData(d(this).parent(".folder"));h=h||f.itemData(d(this)),l.loadingImage();if(c.hasClass("file"))if(d(b.helper).hasClass("copy_drag")){var i=d("#file_context_links ."+h.context_string+"_attachments_url").attr("href"),j={"attachment[source_attachment_id]":e.id,"attachment[folder_id]":h.id};d.ajaxJSON(i,"POST",j,function(a){l.loadingImage("remove"),f.updateFile(h.context_string,a,!1),f.selectFolder(g),f.refreshView()},function(a){l.loadingImage("remove")})}else{var i=d("#file_context_links ."+h.context_string+"_attachment_url").attr("href");i=d.replaceTags(i,"id",e.id),d.ajaxJSON(i,"PUT",{"attachment[folder_id]":h.id},function(a){l.loadingImage("remove"),f.updateFile(h.context_string,a,!1),f.selectFolder(g),f.refreshView()},function(a){l.loadingImage("remove")})}else if(d(b.helper).hasClass("copy_drag")){var i=d("#file_context_links ."+h.context_string+"_folders_url").attr("href"),j={"folder[source_folder_id]":e.id,"folder[parent_folder_id]":h.id};d.ajaxJSON(i,"POST",j,function(a){l.loadingImage("remove"),f.refreshContext(h.root_context_string)},function(a){l.loadingImage("remove")})}else{var i=d("#file_context_links ."+h.context_string+"_folder_url").attr("href");i=d.replaceTags(i,"id",e.id),d.ajaxJSON(i,"PUT",{"folder[parent_folder_id]":h.id},function(a){l.loadingImage("remove"),f.refreshContext(e.root_context_string)},function(a){l.loadingImage("remove")})}},over:function(a,b){d(b.helper).hasClass("true-draggable")||d(this).removeClass("drop_target");var c=f.itemData(d(b.draggable)),g=f.itemData(d(this).parent(".folder"));g=g||f.itemData(d(this)),d(b.helper).find(".header .sub_header").text("move to "+g.name),c&&g&&c.context_string!=g.context_string&&(d(b.helper).addClass("copy_drag"),d(b.helper).find(".header .sub_header").html("<strong>copy</strong> to "+e(g.name)))},out:function(a,b){d(b.helper).removeClass("copy_drag"),d(b.helper).find(".header .sub_header").html("&nbsp;")}},breadcrumb:function(){var a=location.hash.substring(1).replace(/\/\//g,"\\").split("/"),b=d("<div/>"),c=[];for(var e=0;e<a.length-1;e++){var f=d("<a/>");c.push(a[e].replace(/\\\\/g,"/")),f.attr("href","#"+c.join("/")),f.text(a[e]),b.append(f)}return b},refreshContext:function(b,c){f.refreshContext.refreshing=f.refreshContext.refreshing||{};if(f.refreshContext.refreshing[b])return;f.refreshContext.refreshing[b]=!0;var e=d("#file_context_links ."+b+"_attachments_url").attr("href");d.ajaxJSON(e,"GET",{},function(e){f.clearDataCache(),f.refreshContext.refreshing[b]=!1;var h=l.scrollTop(),i=null;for(var j in g){var k=g[j][0];if(k.context_string==b){i=k.context_name,g[j][0].context.includes_files=!0;for(var n in e.folders)for(var o in g[j][1].folders)g[j][1].folders[o].id==e.folders[n].id&&(e.folders[n].includes_files=g[j][1].folders[o].includes_files);e.files=e.files||[];for(var n in g[j][1].files)e.files.push(g[j][1].files[n]);g[j][1]=e}}var p=d("#files_structure > ul > li.context."+b).filter(":first");p.length===0&&(p=null);var q=[],r=!1;if(p){r=p.hasClass("open");var s=p.find("li.node.open");s.each(function(){q.push(f.itemData(d(this)).id)})}var t=null;for(var j in e.contexts)for(var n in e.contexts[j])t||(t=n,i=e.contexts[j][n].name);var u=null;!e.folders&&e[0]&&e[0][1]&&e[0][1].folders&&(e.folders=e[0][1].folders);for(var j in e.folders)!u&&e.folders[j].folder&&e.folders[j].folder.parent_folder_id===null&&(u=e.folders[j].folder);var v=p;if(!v||v.length===0)v=l.find(".folder_blank").clone(!0).removeClass("folder_blank");v.children(".name").text(i),v.children(".id").text(u.id),v.addClass("context folder folder_"+u.id+" "+b),v.find("li").addClass("to_be_removed");var w=v.children("ul"),x=function(a,b){for(var c in e.folders)if(b.id&&e.folders[c].folder.parent_folder_id==b.id){var d=a.children("ul").children(".folder_"+e.folders[c].folder.id);d.length===0&&(d=l.find(".folder_blank").clone(!0).removeClass("folder_blank"),d.addClass("folder folder_"+e.folders[c].folder.id),d.children(".id").text(e.folders[c].folder.id),d.children(".name").text(e.folders[c].folder.name)),d.removeClass("to_be_removed"),x(d,e.folders[c].folder),d.parents("body").length===0&&a.children("ul").append(d.show())}};e.folders=a.sortBy(e.folders,function(a){return(a.folder.name||"").toLowerCase()});for(var j in e.folders)if(e.folders[j].folder.parent_folder_id==u.id){var y=w.find(".folder_"+e.folders[j].folder.id);y.length===0&&(y=l.find(".folder_blank").clone(!0).removeClass("folder_blank"),y.addClass("folder folder_"+e.folders[j].folder.id),y.children(".name").text(e.folders[j].folder.name),y.children(".id").text(e.folders[j].folder.id)),y.removeClass("to_be_removed"),x(y,e.folders[j].folder),y.parents("body").length===0&&w.append(y.show())}var z={};for(var j in e.groups)z[(e.groups[j].group||e.groups[j].course_assigned_group).category]=!0;for(var j in z){var A=l.find(".folder_blank").clone(!0).removeClass("folder_blank");A.fillTemplateData({data:{name:j}}),A.addClass("groups");for(var n in e.groups){var B=e.groups[n].group||e.groups[n].course_assigned_group;if(B.category==j){var C=null;for(var o in e.folders)!C&&!e.folders[o].folder.parent_folder_id===null&&(C=e.folders[o].folder);if(C){var D=A.children("ul").children(".group_"+B.id);D.length===0&&(D=l.find(".folder_blank").clone(!0).removeClass("folder_blank"),D.addClass("group context folder folder_"+C.id),D.addClass("group_"+B.id),D.fillTemplateData({data:{name:B.name,id:C.id}})),D.removeClass("to_be_removed"),x(D,C),D.parents("body").length===0&&A.children("ul").append(D.show())}}}w.append(A.show())}var E=!1;v.find(".to_be_removed").remove(),l.find("#files_structure_list > .folder").each(function(){var a=f.itemData(d(this));a&&a.root_context_string==b&&(d(this)[0]!=v[0]&&(d(this).after(v.show()),d(this).remove()),E=!0)}),E||l.find("#files_structure_list").append(v.show()),v.children(".text").droppable(f.droppable_options),v.find(".folder > .text").droppable(f.droppable_options);for(var j in q)f.expandFolder(v.find(".folder_"+q[j]));r&&f.expandFolder(v),l.scrollTop(h),m.instTree.InitInstTree(m),l.find("li.node.active-node,li.leaf.active-leaf").filter(":first").children(".name").click(),c&&d.isFunction(c)&&c()},function(){f.refreshContext.refreshing[b]=!1})},refreshContentListeners:function(){var a=f.currentContext();a&&a.permissions&&a.permissions.manage_files&&i.find(".folder.draggable_droppable").droppable(f.droppable_options),f.canManageAContext&&(i.find(".folder.draggable_droppable").draggable(f.draggable_options),i.find(".file").draggable(f.draggable_options))},nodeClumpSize:25,addScrollCatcher:function(){var a=function(){var a=i.scrollTop(),b=!1,c=0;i.find(".catcher").remove();var d=i.find(".folder_item:visible:last"),e=d.data("node");if(e){e=e.next();var g=!1;while(e.length>0)e.hasClass("separator")||(c++,c<=f.nodeClumpSize?f.addContentItem(e):g=!0),e=e.next();f.refreshContentListeners(),g&&f.addScrollCatcher()}i.scrollTop(a)},b=d("<li class='catcher'>&nbsp;</li>");f.watchingScroll||(i.bind("scroll",function(b){var c=i.find(".catcher:visible:first");if(c.length>0){var d=c.offset().top,e=i.offset().top+i.height();d<e&&a()}}),f.watchingScroll=!0),i.append(b)},addContentItem:function(b,e){var h=f.itemData(b);if(!h||!h.id)return;var j=!1;if(b.hasClass("node")){var k=i.find(".folder_"+h.id);if(k.length===0){var l=d.replaceTags(d("."+h.context_string+"_folder_url").attr("href"),"id",h.id);j=!0,k=d("#content_templates .folder:first").clone(!0),e&&k.hide(),k.fillTemplateData({data:h}).data({node:b,parent_node:b.parent().parent()}).addClass("folder_"+h.id),k.find(".rename_item_link,.delete_item_link,.folder_url").attr("href",l),k.find(".item_icon.draggable").attr("title",c.t("titles.click_and_drag","Click and drag to move folder to another folder"))}k.toggleClass("editable_folder_item",!b.hasClass("context")&&!!(h.context&&h.context.permissions&&h.context.permissions.manage_files||h.permissions&&h.permissions.update)),k.removeClass("to_be_removed"),k.find(".item_icon").toggleClass("draggable",k.hasClass("editable_folder_item")),k.find(".item_icon").attr("alt",c.t("alts.folder","Folder")).attr("src",d("#content_blank_icon").attr("src")),h&&h.currently_locked&&k.find(".item_icon").attr("alt",c.t("alts.folder_locked","Locked Folder")).attr("src",d("#content_locked_icon").attr("src")),k.find(".lock_item_link").showIf(!h.currently_locked),k.find(".unlock_item_link").showIf(h.currently_locked),k.toggleClass("folder_locked",!!h&&!!h.currently_locked).toggleClass("draggable_droppable",b.hasClass("folder")&&!b.hasClass("context"));if(j){var m=a.filter(g[0][1].folders,function(a){return a.folder.parent_folder_id===h.parent_folder_id}),n=a.find(m,function(a){return a.folder.name==h.name}),o=a.indexOf(m,n);$target=i.find("li.folder_item.folder").eq(o),$files=i.children("li.folder_item.file"),$target.length?$target.before(k):$files&&$files.length?$files.first().before(k):i.append(k)}}else{var k=i.find(".file_"+h.id);if(k.length===0){j=!0,k=d("#content_templates .file:first").clone(!0),e&&k.hide();var p=d.replaceTags(d("#file_context_links ."+h.context_string+"_attachment_url").attr("href"),"id",h.id),q=d.replaceTags(d("#file_context_links ."+h.context_string+"_download_attachment_url").attr("href"),"id",h.id);k.fillTemplateData({data:h}).data({parent_node:b.parent().parent(),node:b}).addClass(h.mime_class+" file_"+h.id),k.find(".attachment_url").attr("href",p),k.find(".download_url").attr("href",q),k.find(".item_icon.draggable").attr("title","Click and drag to move file to another folder")}k.toggleClass("editable_folder_item",!!(h.context&&h.context.permissions&&h.context.permissions.manage_files||h.permissions&&h.permissions.update)).removeClass("to_be_removed").find(".item_icon").attr({alt:c.t("alts.file","File"),src:d("#content_blank_icon").attr("src")}),h&&h.currently_locked&&k.find(".item_icon").attr({alt:c.t("alts.locked_file","Locked File"),src:d("#content_locked_icon").attr("src")}),k.find(".lock_item_link").showIf(!h.currently_locked),k.find(".unlock_item_link").showIf(h.currently_locked),k.find(".preview_item_link").showIf(h.scribd_doc||h.content_type.match(/image/)||h.content_type.match(/(video|audio)/)&&h.media_entry_id),k.find(".edit_item_content_link_holder").showIf(k.hasClass("editable_folder_item")&&h.context_type!="User"&&(k.hasClass("text")||k.hasClass("html")||k.hasClass("code"))),k.find(".item_icon").toggleClass("draggable",k.hasClass("editable_folder_item"));if(j){var r=a.filter(g[0][1].files,function(a){return a.attachment.folder_id===h.folder_id}),s=a.find(r,function(a){return a.attachment.display_name===h.display_name}),o=a.indexOf(r,s);$target=i.find("li.folder_item.file").eq(o),$target.length?$target.before(k):i.append(k)}}return j},updateFile:function(b,c,e){f.clearDataCache();var h=d.underscore(c.attachment.context_type)+"_"+c.attachment.context_id;for(var i in g){var j=g[i]&&(g[i][0].context_string==b||g[i][0].context_string==h);if(j){var k=!1,n=!1;if(!c.definitely_new)for(var o in g[i][1].files){var p=g[i][1].files[o].attachment;p.id==c.attachment.id&&(g[i][1].files[o]=c,l.find(".file_"+p.id).each(function(){var a=f.itemData(d(this).parent("ul").parent("li"));a.id==c.attachment.folder_id?(d(this).fillTemplateData({data:{name:c.attachment.display_name}}),c.attachment.display_name&&d(this).find(".name").attr("title",c.attachment.display_name)):n=!0}),k=!0,n&&l.find(".file_"+p.id).remove())}if(!k||n){k||(c.definitely_new=!1,g[i][1].files.push(c));var q=g[i][1].files;g[i][1].files=a.sortBy(q,function(a){return(a.attachment.display_name||"").toLowerCase()});var r=c.attachment;r.name=r.display_name;var s=l.find(".file_blank").clone(!0).removeClass("file_blank").addClass("file_"+r.id).addClass(r.mime_class).fillTemplateData({data:r});r.name&&s.find(".name").attr("title",r.name);var t=function(){l.find(".folder_"+r.folder_id).children("ul").append(s.show())},u=a.filter(g[i][1].files,function(a){return a.attachment.folder_id===c.attachment.folder_id}),v=a.find(u,function(a){return a.attachment.display_name===c.attachment.display_name}),w=a.indexOf(u,v),x=l.find(".folder_"+r.folder_id).children("ul").find("> li.file").eq(w);x.length?x.before(s.show()):t()}}}e!==!1&&(f.refreshView(c.attachment),m.instTree.InitInstTree(m))},updateFolder:function(a,b,c){f.clearDataCache();var e=d.underscore(b.folder.context_type)+"_"+b.folder.context_id,h=b.already_in_place;b.already_in_place=null;for(var i in g)if(g[i]&&(g[i][0].context_string==a||g[i][0].context_string==e)){var j=!1,k=!1;for(var m in g[i][1].folders){var n=g[i][1].folders[m].folder;n.id==b.folder.id&&(n.includes_files&&(b.folder.includes_files=n.includes_files),g[i][1].folders[m]=b,l.find(".folder_"+n.id).each(function(){var a=f.itemData(d(this).parent("ul").parent("li"));a=a||{parent_folder_id:null};if(a.id==b.folder.parent_folder_id){d(this).hasClass("context")||d(this).children(".name").text(b.folder.name).attr("title",b.folder.name);if(!h){d(this).prev("li.separator").remove();var c=d(this).parent("ul").parent("li"),e=null,g=d(this),i=d(this)[0],j=f.itemData(d(this)).name||"";c.children("ul").children("li:not(.separator)").each(function(){var a=f.itemData(d(this)).name||"",b=d(this),c=b[0];if(c!=i&&(!b.hasClass("folder")||j.toLowerCase()<a.toLowerCase()))return e=b,!1}),e?e.before(g.show()).before("<li class='separator'/>"):c.children("ul").append("<li class='separator'/>").append(g.show())}}else k=!0}),j=!0,k&&l.find(".folder_"+n.id).remove())}if(!j||k)f.foldersStillLoading=f.foldersStillLoading||{},f.foldersStillLoading[b.folder.id]=b,f.refreshContext(a),a!=e&&f.refreshContext(e)}c!==!1&&f.refreshView(b.folder)},refreshView:function(a){l.find("li.node.active-node,li.leaf.active-leaf").filter(":first").children(".text:visible:first").click(),a&&a.id&&(i.find(".file_"+a.id).mouseover(),i.find(".folder_"+a.id).mouseover()),k.triggerHandler("show")},currentItemData:function(){return f.itemData(l.find("li.node.active-node,#files_structure li.leaf.active-leaf"))},currentContext:function(){var a=f.currentItemData().context_string;for(var b in g)if(g[b][0].context_string==a)return g[b][0].context;return null},clearDataCache:function(){f.clearDataCache.cacheIndex++},itemData:function(a){var b=a.data("item_data");if(b&&b.cacheIndex==f.clearDataCache.cacheIndex)return b;var b=f.uncachedItemData(a);return b&&(b.cacheIndex=f.clearDataCache.cacheIndex,a.data("item_data",b)),b},uncachedItemData:function(a){if(a.closest("#files_content").length>0)return f.itemData(a.data("node"));var b=a.getTemplateData({textValues:["id"]}).id;for(var c in g){var e=g[c],h=null;if(a.hasClass("file")){var i=e[1].files;for(var j in i){var k=i[j].attachment;if(k.id==b)return k.context_string=d.underscore(k.context_type)+"_"+k.context_id,k.root_context_string=e[0].context_string,k.context=e[0].context,k.name=k.display_name,k}}else if(a.hasClass("groups")){if(a.parents("li.context:last").hasClass(e[0].context_string))return res=a.getTemplateData({textValues:["name"]}),res.context_string=e[0].context_string,res.context=e[0].context,res}else if(a.hasClass("folder")){var l=e[1].folders;for(var j in l){var m=l[j].folder;if(m.id==b)return m.context_string=d.underscore(m.context_type)+"_"+m.context_id,m.root_context_string=e[0].context_string,a.hasClass("context")&&(m.name=a.getTemplateData({textValues:["name"]}).name),m.context=e[0].context,m}}else if(a.hasClass("group")){var n=e[1].groups;for(var j in n){var o=n[j].group||n[j].course_assigned_group;o.context_string=d.underscore(o.context_type)+"_"+o.context_id,o.root_context_string=e[0].context_string;if(o.id==b)return o}}}if(a.hasClass("folder")){var e=null;for(var c in g)a.closest(".context").hasClass(g[c][0].context_string)&&(e=g[c]);for(var c in f.foldersStillLoading)if(f.foldersStillLoading[c].folder.id==b){var m=f.foldersStillLoading[c].folder;return m.name=a.getTemplateData({textValues:["name"]}).name,m.context_string=e[0].context_string,m.context=e[0].context,m}if(e){var m={};return m.name=a.getTemplateData({textValues:["name"]}).name,m.id=b,m.context_string=e[0].context_string,m.permissions={read_contents:!0},m.context=e[0].context,m.false_folder=!0,m}}return null}}),d(document).ready(function(){function e(){var a=d("#edit_content_dialog");a.find("button").attr("disabled",!1).filter(".save_button").text(c.t("buttons.update_file","Update File")),a.find("button").attr("disabled",!0).filter(".save_button").text(c.t("messages.updating_file","Updating File..."));var b=f.currentItemData().context_string,e=a.find("textarea"),g=e.data("tinyIsVisible")?e.editorBox("get_code"):e.val();d.ajaxFileUpload({url:a.data("update_url"),method:"PUT",binary:!1,data:{"attachment[uploaded_data]":{fake_file:!0,name:a.data("filename"),content_type:a.data("content_type"),content:g}},success:function(d){a.find("button").attr("disabled",!1).filter(".save_button").text(c.t("buttons.update_file","Update File")),f.updateFile(b,d),a.dialog("close")},error:function(){a.find("button").attr("disabled",!1).filter(".save_button").text(c.t("errors.update_file_failed","Updating File Failed, please try again"))}})}f.init(),setInterval(function(){k.triggerHandler("show")},1e3),d(".folder_item").live("mousedown",function(a){a.preventDefault()}),d(".folder_item.ui-draggable").live("mouseover",function(){d(this).find(".item_icon").attr("title",c.t("titles.drag_to_move","Drag to move to a different folder"))}),j.hover(function(a){k.css("text-decoration","underline")},function(a){k.css("text-decoration","none")}),k.bind("show",function(){var a=k.width(),b=k.height(),c=k.offset(),d=i.offset();c.left=c.left-d.left,c.top=c.top-d.top,j.css({width:a+5,height:b+5,top:c.top-5,left:c.left-5})}),d("#file_uploads_dialog_link").click(function(a){a.preventDefault(),d("#file_uploads").dialog({title:c.t("titles.file_uplaods_queue","File Uploads Queue")})}),setTimeout(function(){l.find(".folder > .text").droppable(f.droppable_options),d("#files_structure_list > li").hide(),m.instTree({autoclose:!1,multi:!1,dragdrop:!1,onExpand:function(a){if(a.hasClass("folder")){var b=f.itemData(a);b&&!b.includes_files&&f.getFilesForFolder(b,!1)}},onCollapse:function(a){a.find(".node.active-node,.leaf.active-leaf").length>0&&a.find(".text:visible:first").click()},onClick:function(a,e){i.find(".content_panel").addClass("to_be_hidden"),i.find(".folder_item").addClass("to_be_removed"),i.find(".catcher").addClass("to_be_removed"),i.find(".file_preview").remove(),i.find(".message").remove();var g=function(){i.find(".content_panel.to_be_hidden").hide(),i.find(".catcher.to_be_removed").remove(),i.find(".folder_item.to_be_removed").remove()},h=f.itemData(e),j=encodeURIComponent(f.fullPath(e));location.hash!="#"+j&&location.replace("#"+j),!h.includes_files&&h.full_name&&f.getFilesForFolder(h),h.context_string&&(b&&(b.interaction_context=h.context_string),f.updatePageView(h.context_string));if(e.hasClass("node")){var l=d.replaceTags(d("."+h.context_string+"_folder_url").attr("href"),"id",h.id),m=!1,n=d("<li class='message'>"+c.t("messages.folder_empty","Nothing in this Folder")+"</li>");if(e.hasClass("folder"))if(!h||!h.permissions||!h.permissions.read_contents)i.find(".content_panel:last").after("<li class='message'>"+c.t("messages.access_denied","You cannot read the contents of this folder.")+"</li>"),m=!0;else{var o=d("#folder_panel");o.find(".rename_item_link,.delete_item_link,.folder_url").attr("href",l),o.find(".breadcrumb").empty().append(f.breadcrumb()),o.toggleClass("editable_content_panel",!!(h.context&&h.context.permissions&&h.context.permissions.manage_files||h.permissions&&h.permissions.update)).toggleClass("addable_content_panel",!!(h.context&&h.context.permissions&&h.context.permissions.manage_files||h.permissions&&h.permissions.update)).toggleClass("downloadable_content_panel",!o.hasClass("editable_content_panel")&&!o.hasClass("addable_content_panel")&&!!h.permissions&&!!h.permissions.read_contents),o.removeClass("to_be_hidden"),o.find(".download_zip,.upload_zip").hide(),(e.hasClass("context")||!(h&&h.permissions&&h.permissions.update))&&o.removeClass("editable_content_panel");var p=d.replaceTags(d("."+h.context_string+"_folder_url").attr("href")+"/download","id",h.id);d(".download_zip_link").attr("href",p),d(".upload_zip_link").attr("href",d("."+h.context_string+"_import_url").attr("href")+"?return_to="+encodeURIComponent(location.href)+"&folder_id="+h.id),h.unlock_at_string=d.parseFromISO(h.unlock_at).datetime_formatted,h.lock_at_string=d.parseFromISO(h.lock_at).datetime_formatted,o.find(".lock_after").showIf(h.lock_at),o.find(".lock_until").showIf(h.unlock_at),o.find(".currently_locked_box").showIf(h.currently_locked),o.find(".lock_item_link").showIf(h.parent_folder_id&&!h.currently_locked),o.find(".unlock_item_link").showIf(h.parent_folder_id&&h.currently_locked),o.find(".download_zip").showIf(h.permissions&&h.permissions.read_contents),o.find(".upload_zip").showIf(h.context&&h.context.permissions&&h.context.permissions.manage_files),o.find(".edit_link").showIf(h.context&&h.context.permissions&&h.context.permissions.manage_files),o.fillTemplateData({data:h}),o.data("node",e),o.show(),k.triggerHandler("show")}else if(e.hasClass("groups")){var o=d("#groups_panel"),q=h.context,r=d("."+h.context_string+"_groups_url").attr("href");o.find(".category_name").text(h.name),o.find(".context_name").text(q.name),o.find(".breadcrumb").empty().append(f.breadcrumb()),o.find(".groups_link").attr("href",r),o.removeClass("to_be_hidden"),q&&q.permissions&&q.permissions.read_roster&&o.toggleClass("addable_content_panel",!0),o.show()}if(!m){var s=0,t=e.children("ul").children("li.node,li.leaf").length;g.already_cleared=!0,setTimeout(function(){var a=!1;e.children("ul").children("li.node,li.leaf").each(function(){s++,s<f.nodeClumpSize&&(newItem=f.addContentItem(d(this),!0),newItem&&(a=!0))}),i.find("li.folder_item").show(),t>=f.nodeClumpSize&&f.addScrollCatcher(),a&&f.refreshContentListeners();if(e.children("ul").children("li.node,li.leaf").length===0||e.hasClass("folder")&&!h.includes_files)e.hasClass("folder")&&!h.includes_files&&(n.addClass("no_content"),n.text(c.t("messages.loading_files","Loading Files...")),f.getFilesForFolder(h,function(a){a.files.length>0?f.refreshView():i.find(".message.no_content").remove()})),i.find(".message.no_content").length===0&&i.append(n);g()},10)}}else if(e.hasClass("file")){var o=d("#file_panel"),u=null;h.unlock_at_string=d.parseFromISO(h.unlock_at).datetime_formatted,h.lock_at_string=d.parseFromISO(h.lock_at).datetime_formatted,o.find(".lock_after").showIf(h.lock_at),o.find(".lock_until").showIf(h.unlock_at),o.find(".currently_locked_box").showIf(h.currently_locked),o.find(".lock_item_link").showIf(!h.currently_locked),o.find(".unlock_item_link").showIf(h.currently_locked),o.removeClass("to_be_hidden"),o.fillTemplateData({data:h});var v=d.replaceTags(d("#file_context_links ."+h.context_string+"_attachment_url").attr("href"),"id",h.id),w=d.replaceTags(d("#file_context_links ."+h.context_string+"_download_attachment_url").attr("href"),"id",h.id);o.find(".breadcrumb").empty().append(f.breadcrumb()),o.find(".attachment_url").attr("href",v).end().find(".download_item_link").attr("href",w),o.removeClass("editable_content_panel"),h&&h.permissions&&h.permissions.update&&o.addClass("editable_content_panel"),o.removeClass("panel_locked");if(!h||!h.permissions||!h.permissions.download)o.addClass("panel_locked");else if(h&&h.permissions&&h.permissions.download&&d.isPreviewable(h.content_type))u=d("#content_templates .file_scribd_preview").clone(!0),u.append("<div id='doc_preview_holder'/>");else if(h&&h.content_type.match(/image/)){u=d("#content_templates .file_image_preview").clone(!0);var x=d.replaceTags(d("#file_context_links ."+h.context_string+"_preview_attachment_url").attr("href"),"id",h.id);u.find("a").attr("href",w),u.find("img").attr("src",d(".preview_loading_image").attr("src")).attr("src",x||"").attr("title",h.display_name)}else if(h&&h.content_type.match(/(video|audio)/)&&h.media_entry_id){u=d("#content_templates .file_media_preview").clone(!0),u.fillTemplateData({data:h});var y=h.content_type.match(/video/)?"video":"audio";u.find(".media_preview").mediaComment("show_inline","maybe",y,w),u.find("a").attr("href",w)}else u=d("#content_templates .file_no_preview").clone(!0),u.fillTemplateData({data:h}),u.find("a").attr("href",w);o.data("node",e),o.show();if(u){u.addClass("file_preview"),i.append(u);var z=function(){d("#doc_preview_holder").loadDocPreview({mimeType:h.content_type,attachment_id:h.id,height:"100%",crocodoc_session_url:h.crocodocSession,scribd_doc_id:h.scribd_doc&&h.scribd_doc.attributes&&h.scribd_doc.attributes.doc_id,scribd_access_key:h.scribd_doc&&h.scribd_doc.attributes&&h.scribd_doc.attributes.access_key,attachment_view_inline_ping_url:f.viewInlinePingUrl(h.context_string,h.id),attachment_scribd_render_url:f.scribdRenderUrl(h.context_string,h.id),attachment_preview_processing:h.workflow_state=="pending_upload"||h.workflow_state=="processing"})};h.permissions&&h.permissions.download&&d.isPreviewable(h.content_type)&&(h["crocodoc_available?"]&&!h.crocodocSession?u.disableWhileLoading(d.ajaxJSON("/attachments/"+h.id+"/crocodoc_sessions/","POST",{annotations:!1},function(a){h.crocodocSession=a.session_url,z()},function(){h["crocodoc_available?"]=!1,z()})):z())}d(window).triggerHandler("resize")}g.already_cleared||g()}}),d("#files_structure_list > li.context").show(),d("#files_structure_list .context").length==1&&f.expandFolder(d("#files_structure_list .context"))},500),d(window).bind("resize",function(){var a=l.offset().top,b=d(window).height()-a,c=142,e=d("#section-tabs").height();l.height(Math.max(e,b-c)),i.height(Math.max(e,b-c));var f=i.height(),g=d("#file_panel").outerHeight();d("#doc_preview_holder").height(f-g)}),d("#folder_panel .download_zip").click(function(a){a.preventDefault(),b.downloadFolderFiles(d(this).find(".download_zip_link").attr("href"))}),d(".folder_item .edit_item_content_link").click(function(a){a.preventDefault(),a.stopPropagation();var b=d(this).parents(".folder_item,#file_panel,#folder_panel"),g=f.itemData(b),h=b.find(".download_url").attr("href"),i=b.find(".name:first").text(),j=d("#edit_content_dialog");j.data("update_url",b.find(".rename_item_link").attr("href")).data("content_type",g.content_type||"").data("filename",g.filename||"file_to_update"),j.find(".display_name").text(i),j.find(".loading_message").text("Loading File Contents...").show().end().find(".content").hide(),j.dialog({width:600,height:410,buttons:[{text:c.t("cancel","Cancel"),click:function(){d("#edit_content_dialog").dialog("close")}},{text:c.t("update_file","Update File"),click:e,"class":"btn-primary"}],close:function(){var a=d(this).find("textarea");a.data("tinyIsVisible")&&(a.editorBox("toggle"),a.data("tinyIsVisible",!1))}}),d.ajax({dataType:"json",error:function(){j.find(".loading_message").text(c.t("errors.loading_file","Error Loading File Contents.  Please try again."))},success:function(a){var c=a.body,d=j.find("textarea").val(c),e=d.data("rich_text"),f=d.data("tinyIsVisible");d.css("width","100%"),j.find(".loading_message").hide().end().find(".content").show(),b.hasClass("html")&&(j.css("height","380px"),j.find(".switch_views").show().unbind("click").bind("click",function(a){a.preventDefault(),e?(d.editorBox("toggle"),d.data("tinyIsVisible",!f)):(e=!0,setTimeout(function(){j.find(".html_edit_warning").fadeIn()},250),d.editorBox({tinyOptions:{valid_elements:"*[*]",extended_valid_elements:"*[*]",plugins:"autolink,instructure_external_tools,instructure_contextmenu,instructure_links,instructure_image,instructure_equation,instructure_equella,media,paste,table,inlinepopups"}}),d.data("tinyIsVisible",!f))})),j.find(".textarea").focus()},url:h.replace(/\/download/,"/contents")})}),d(".folder_item .preview_item_link").click(function(a){a.preventDefault(),a.stopPropagation(),f.selectFolder(d(this).parents(".folder_item").data("node"))}),d(".folder_item .rename_item_link,#file_panel .rename_item_link,#folder_panel .rename_item_link").click(function(a){a.preventDefault(),a.stopPropagation();var b=d(this).parents(".folder_item,#file_panel,#folder_panel"),c=b.getTemplateData({textValues:["name"]}).name;b.find(".name").hide().after(d("#rename_entry_field")),d("#rename_entry_field").val(c).focus().select(),d(this).blur()}),d("#rename_entry_field").bind("blur",function(a,b){var c=d(this).parents(".folder_item,#file_panel,#folder_panel");if(c.length===0)return;var e=c.getTemplateData({textValues:["name"]}).name,g=d(this).val();if(b!==!1&&g!=""&&e!=g){c.find(".name").text(g);var h=f.itemData(c.data("node")),i=h.root_context_string;if(c.hasClass("folder")||c.attr("id")=="folder_panel"){var j=d.replaceTags(d("#file_context_links ."+i+"_folder_url").attr("href"),"id",h.id);d.ajaxJSON(j,"PUT",{"folder[name]":g},function(a){f.updateFolder(i,{folder:a.folder,already_in_place:!0})},function(){})}else{var j=d.replaceTags(d("#file_context_links ."+i+"_attachment_url").attr("href"),"id",h.id);d.ajaxJSON(j,"PUT",{"attachment[display_name]":g},function(a){f.updateFile(i,a)},function(){})}}c.find(".name").show(),d(this).val("").appendTo(d("#file_context_links")),d(this).triggerHandler("blur",!1)}),d("#rename_entry_field").keycodes("return esc",function(a){d(this).triggerHandler("blur",a.keyString=="return")}),d(".folder_item .delete_item_link,#folder_panel .delete_item_link,#file_panel .delete_item_link").click(function(a){a.preventDefault(),a.stopPropagation();var b=f.itemData(d(this).parents(".folder_item"));b=b||f.itemData(d(this).parents("#folder_panel,#file_panel").data("node"));var e=d(this).parents(".folder_item").hasClass("file")?"file":"folder";d(this).parents(".folder_item").confirmDelete({message:d(this).parents(".folder_item").hasClass("folder")||d(this).hasClass("folder_url")?c.t("prompts.delete_folder","Are you sure you want to delete this folder and all of its contents?"):c.t("prompts.delete_file","Are you sure you want to delete this file?"),url:d(this).attr("href"),success:function(){l.find(".file_"+b.id+",.folder_"+b.id).filter(".active-node,.active-leaf").length>0&&f.selectFolder(l.find(".file_"+b.id+",.folder_"+b.id).filter(".active-node,.active-leaf").parent("ul").parent("li")),l.find(".file_"+b.id).prev("li.separator").remove(),l.find(".file_"+b.id).remove(),l.find(".folder_"+b.id).prev("li.separator").remove(),l.find(".folder_"+b.id).remove(),f.refreshView(),f.updateQuota(),d(this).slideUp(function(){d(this).remove()})}})}),d(".folder_item:not(.add_item)").click(function(a){var b=d(this);a.preventDefault();if(i.filter(".dragging").length>0)return;if(d(this).find("#rename_entry_field").length>0)return;a.stopPropagation(),b.data("parent_node")&&f.expandFolder(b.data("parent_node")),setTimeout(function(){if(b.hasClass("folder")){f.expandFolder(b.data("node"));var a=function(){f.refreshView(),d(this).unbind("files_load",a)};b.data("node").bind("files_load",a),b.data("node").children(".text").click()}else b.find(".name").focus(),location.href=b.find(".download_url").attr("href")},50)}),d(".folder_item").hover(function(a,b){d(".folder_item_hover").removeClass("folder_item_hover"),d(this).addClass("folder_item_hover")},function(){}),d("#folder_panel .add_file_link").click(function(a){a.preventDefault();if(i.find(".add_form:visible").length>0)return;var b=d("#add_file_form").clone(!0).removeAttr("id");i.children(".message").remove(),i.append(b),i.scrollToVisible(b);var c=f.currentItemData();b.fillFormData({folder_id:c.id},{object_name:"attachment"}),b.find("form").attr("action",d("#file_context_links ."+c.context_string+"_attachments_url").attr("href")+".text"),b.mouseover(),b.find(":text:first").focus().select()}),d("#folder_panel .add_folder_link").click(function(a){a.preventDefault();if(i.find(".add_form:visible").length>0)return;var b=d("#add_folder_form").clone(!0).removeAttr("id");i.children(".message").remove(),i.find("#folder_panel.addable_content_panel").after(b),i.scrollToVisible(b);var c=f.currentItemData();b.fillFormData({parent_folder_id:c.id},{object_name:"folder"}),b.find("form").attr("action",d("#file_context_links ."+c.context_string+"_folders_url").attr("href")),b.mouseover(),b.find(":text:first").focus().select()}),d("#add_folder_form :text").keycodes("esc",function(a){a.keyString=="esc"&&d(this).trigger("blur",!0)}),d("#add_folder_form :text").bind("blur",function(a,b){b?d(this).parents("li").remove():d.trim(d(this).val())&&d(this).parents("form").trigger("submit")}),d("#add_folder_form .add_folder_form").formSubmit({beforeSubmit:function(a){if(d(this).hasClass("submitting"))return!1;d(this).addClass("submitting"),d(this).find(".name").show().text(a["folder[name]"]),d(this).find(":text").hide(),d(this).data("root_context_string",f.currentItemData().root_context_string)},success:function(b){d(this).removeClass("submitting");for(var c in g)g[c][0].context_string==d(this).data("root_context_string")&&g[c][1].folders.push(b);var e=g[0][1].folders;g[0][1].folders=a.sortBy(e,function(a){return(a.folder.name||"").toLowerCase()});var h=b.folder,i=l.find(".folder_blank").clone(!0).removeClass("folder_blank");i.addClass("folder folder_"+h.id),i.fillTemplateData({data:{name:h.name,id:h.id}});var j=l.find(".folder_"+h.parent_folder_id);j.children("ul").append("<li class='separator'/>"),j.children("ul").append(i.show()),f.updateFolder(d(this).data("root_context_string"),b),d(this).parents("li").remove(),i.find("span").droppable(f.droppable_options),f.refreshView(h)},error:function(a){d(this).removeClass("submitting"),d(this).formErrors(a)}}),d("#add_file_form .add_file_form").formSubmit({fileUpload:!0,beforeSubmit:function(a){d(this).data("context_string",f.currentItemData().context_string),d(this).find(".loading_message").slideDown()},success:function(a){d(this).parents("li").remove(),f.updateFile(d(this).data("context_string"),a),f.updateQuota()},error:function(a){d(this).find(".loading_message").slideUp(),d(this).formErrors(a)}}),d("#add_file_form .cancel_button").click(function(){d(this).parents("li").remove()}),d(".folder_item .lock_item_link,#file_panel .lock_item_link,#folder_panel .lock_item_link").click(function(a){a.preventDefault(),a.stopPropagation();var b="attachment",e=d("#lock_attachment_form"),g=d(this).parents(".folder_item,#file_panel,#folder_panel"),h=f.itemData(g)||f.itemData(g.data("node")),i=d(this).attr("href");if(g.hasClass("folder")||d(this).parents("#folder_panel").length>0)b="folder",e=d("#lock_folder_form");e.attr("action",i),e.data("context_string",h.context_string),d("#lock_item_dialog form").hide(),e.show(),h.lock_at=d.parseFromISO(h.last_lock_at).datetime_formatted,h.unlock_at=d.parseFromISO(h.last_unlock_at).datetime_formatted,h.locked=!h.lock_at&&!h.unlock_at?"1":"0",d("#lock_item_dialog").fillTemplateData({data:{name:h.name}}),e.fillFormData(h,{object_name:b}),e.find("#folder_just_hide,#attachment_just_hide").attr("checked",!1).change(),e.find(".item_type").text(b),d("#lock_item_dialog").dialog({modal:!0,width:350,title:b=="folder"?c.t("titles.lock_folder","Lock Folder"):c.t("titles.lock_file","Lock File")}).find(".datetime_field").datetime_field()}),d("#folder_just_hide,#attachment_just_hide").change(function(){d(this).parents("form").find(".full_lock").showIf(!d(this).attr("checked")),d(this).parents("form").find(".lock_checkbox").change()}).change(),d("#lock_item_dialog .cancel_button").click(function(){d("#lock_item_dialog").dialog("close")}),d("#lock_item_dialog .lock_checkbox").change(function(){d(this).parents("table").find(".lock_range").showIf(!d(this).attr("checked"))}).change(),d("#lock_attachment_form").formSubmit({processData:function(a){return a["attachment[unlock_at]"]=d.datetime.process(a["attachment[unlock_at]"]),a["attachment[lock_at]"]=d.datetime.process(a["attachment[lock_at]"]),a},beforeSubmit:function(a){d(this).loadingImage()},success:function(a){d(this).loadingImage("remove"),d("#lock_item_dialog").dialog("close"),f.updateFile(d(this).data("context_string"),a)}}),d("#lock_folder_form").formSubmit({processData:function(a){return a["folder[unlock_at]"]=d.datetime.process(a["folder[unlock_at]"]),a["folder[lock_at]"]=d.datetime.process(a["folder[lock_at]"]),a},beforeSubmit:function(a){d(this).loadingImage()},success:function(a){d(this).loadingImage("remove"),d("#lock_item_dialog").dialog("close"),f.updateFolder(d(this).data("context_string"),{folder:a.folder,already_in_place:!0})}}),d(".folder_item .unlock_item_link,#file_panel .unlock_item_link,#folder_panel .unlock_item_link").click(function(a){a.preventDefault(),a.stopPropagation();var b="attachment",c=d("#lock_attachment_form"),e=d(this).parents(".folder_item,#file_panel,#folder_panel"),g=f.itemData(e)||f.itemData(e.data("node")),h=d(this).attr("href");if(e.hasClass("folder")||d(this).parents("#folder_panel").length>0)b="folder",c=d("#lock_folder_form"),h=e.find(".folder_url").attr("href");e.loadingImage();var i={};i["["+b+"][locked]"]="",i["["+b+"][hidden]"]="",i["["+b+"][lock_at]"]="",i["["+b+"][unlock_at]"]="",e.loadingImage(),d.ajaxJSON(h,"PUT",i,function(a){e.loadingImage("remove"),b=="attachment"?f.updateFile(g.context_string,a):f.updateFolder(g.context_string,{folder:a.folder,already_in_place:!0})},function(a){e.loadingImage("remove")})});if(location.hash===""||location.hash=="#"){var n=d("#files_structure_list .context:first .name:first").text();location.href="#"+encodeURIComponent(n)}d(document).fragmentChange(function(a,b){setTimeout(function(){f.selectNodeFromPath(b.substring(1)),l.scrollToVisible(d("li.active-node,li.active-leaf").find("span.name").filter(":first"))},100)}).fragmentChange(),setTimeout(function(){d(window).triggerHandler("resize"),d("#file_swf").uploadify({fileObjName:"file",swf:"/flash/uploadify/uploadify.swf",uploader:"s3_url",multi:!0,auto:!1,fileSizeLimit:10737418240,buttonText:"",hideButton:!0,width:60,height:22,cancelImg:"/images/blank.png",onInit:function(){k.text(c.t("links.add_files","Add Files")).triggerHandler("show")},onSelect:h.swfFileQueue,onCancel:h.swfCancel,onUploadError:h.swfFileError,onUploadStart:h.swfFileOpen,onUploadProgress:h.swfFileProgress,onUploadSuccess:h.swfFileSuccess})},1e3)})})();var h={ajaxUploadCount:0,swfUploadCount:0,queuedAjaxUploads:[],currentlyUploading:!1,status_status:"hidden",status_request:"hidden",showStatus:function(){h.status_request="shown",h.status_status=="hidden"&&(h.status_status="showing",d("#file_uploads_progress").slideDown(null,null,function(){setTimeout(function(){h.status_status="shown",h.status_request=="hidden"&&h.hideStatus()},3e3)}))},hideStatus:function(){h.status_request="hidden",h.status_status=="shown"&&(h.status_status="hiding",d("#file_uploads_progress").slideUp(null,null,function(){h.status_status="hidden",h.status_request=="shown"&&h.showStatus()}))},queueAjaxUpload:function(a,b){h.ajaxUploadCount=h.queuedAjaxUploads.length;var c={file:a,folder_id:b,name:a.name},d=h.initFile(c);d.data("folder",f.currentItemData()),d.find(".status").text("Queued"),h.queuedAjaxUploads.push(c),h.updateUploadCount(),h.uploadAjaxFiles()},uploadAjaxFiles:function(a){if(h.currentlyUploading&&!a)return;var b=h.queuedAjaxUploads.shift();if(!b)h.currentlyUploading=!1,h.ajaxUploadCount=0,h.updateUploadCount();else{h.currentlyUploading=!0;var e=h.initFile(b);e.find(".status").text("Uploading"),e.find(".progress_bar").progressbar("value",10);var g=e.data("folder"),i=b.file;d.ajaxFileUpload({url:d("."+g.context_string+"_attachments_url").attr("href"),data:{"attachment[uploaded_data]":i,"attachment[display_name]":i.name,"attachment[folder_id]":g.id,duplicate_handling:b.file.duplicate_handling},method:"POST",success:function(a){setTimeout(function(){h.uploadAjaxFiles(!0)},500);var b=a.attachment,g=d.underscore(b.context_type)+"_"+b.context_id;e.find(".cancel_upload_link").hide().end().find(".status").text(c.t("messages.done_uploading","Done uploading")),e.addClass("done"),setTimeout(function(){e.slideUp(function(){e.remove()})},5e3),a.deleted_attachment_ids&&f.deleteAttachmentIds(a.deleted_attachment_ids),f.updateFile(b.context_code,a)},error:function(a){setTimeout(function(){h.uploadAjaxFiles(!0)},500),e.find(".status").text(c.t("#errors.failed","Failed")).end().find(".cancel_upload_link").hide()}})}},updateUploadCount:function(){h.ajaxUploadCount=h.queuedAjaxUploads.length,h.currentlyUploading&&h.ajaxUploadCount++;var a=h.swfPreQueued.length+h.swfFiles.length+h.ajaxUploadCount,b=d("#file_uploads .file_upload.errored:visible").length;if(a===0&&b==0){h.hideStatus();var e=d("#file_upload_blank").clone(!0).removeAttr("id").addClass("finished_message").empty();e.text("Finished uploading all files"),d("#file_uploads .file_upload:visible:first").hasClass("finished_message")||(d("#file_uploads").prepend(e),e.slideDown("fast")),e.addClass("finished_message"),e.click(function(){d(this).slideUp(function(){d(this).remove()})}),setTimeout(function(){e.slideUp(function(){e.remove()})},5e3)}else d("#file_uploads_dialog_link").text(c.t("messages.uploading_files",{one:"Uploading 1 File...",other:"Uploading %{count} Files..."},{count:a})),a===0&&d("#file_uploads_dialog_link").text(c.t("messages.error_count",{one:"1 Error",other:"%{count} Errors"},{count:b})),h.showStatus()},fileDialogComplete:function(a,b){try{b>0&&this.startUpload()}catch(c){this.debug(c)}},swfPreQueued:[],swfQueuedAndPendingFiles:[],swfFiles:[],swfFileQueueOnce:function(a,b){var c=h.swfPreQueued,e=f.currentItemData(),g=[];for(idx in c)g.push(c[idx].name);f.preflight(e.id,e.context_string,g,function(a){for(idx in c)c[idx].duplicate_handling=a},h.swfFileQueueNext,function(){for(idx in c)d("#file_swf").uploadify("cancel",c[idx].id)})},swfFileQueue:function(a){h.swfPreQueued.push(a),clearTimeout(h.swfFileQueueOnceTimeout),h.swfFileQueueOnceTimeout=setTimeout(h.swfFileQueueOnce,500)},swfFileQueueNext:function(){var a=h.swfPreQueued.shift();a?h.swfFileQueueReal(a):h.swfQueueComplete()},swfFileQueueReal:function(a){var b=h.initFile(a);b.data("folder",f.currentItemData()),b.find(".status").text(c.t("messages.queued","Queued")),h.swfFiles.push(a);var e=b.data("folder"),g={"attachment[folder_id]":e.id,"attachment[filename]":a.name,"attachment[context_code]":e.context_string,no_redirect:!0,"attachment[duplicate_handling]":a.duplicate_handling};h.updateUploadCount(),d.ajaxJSON("/files/pending","POST",g,function(c){a.upload_url=c.proxied_upload_url||c.upload_url,a.upload_params=c.upload_params,b.data("success_url",c.success_url),b.hasClass("done")||(h.swfQueuedAndPendingFiles.push(a),h.swfUploadNext()),h.updateUploadCount()},function(e){d.flashError(e&&e.base&&e.base.match(/quota/)?e.base:c.t("upload_error","There was an error uploading your file")),d("#file_swf").uploadify("cancel",a.id),b.find(".cancel_upload_link").hide().end().find(".status").text("Upload Failed")},{skipDefaultError:!0})},swfUploadNext:function(){h.swfQueuedAndPendingFiles.length>0&&(file=h.swfQueuedAndPendingFiles.shift(),file&&(d("#file_swf").uploadify("settings","uploader",file.upload_url),d("#file_swf").uploadify("settings","formData",file.upload_params),d("#file_swf").uploadify("upload",file.id))),h.updateUploadCount()},swfCancel:function(a){var b=h.initFile(a);d("#file_uploads_dialog_link").text(c.t("errors.uploading","Uploading Error")),b.addClass("done"),!b.hasClass("errored")&&!b.hasClass("error_cancelled")&&(b.find(".cancel_upload_link").hide().end().find(".status").text("Canceled"),h.swfFiles=d.grep(h.swfFiles,function(b){return b.id!=a.id}))},swfFileError:function(a,b,e,f,g){g=typeof g!="undefined"?g:!0;if(b==SWFUpload.UPLOAD_ERROR.HTTP_ERROR&&e=="201"){h.s3Success(a);return}var i=h.initFile(a);setTimeout(function(){i.addClass("error_cancelled")},50),h.swfFiles=d.grep(h.swfFiles,function(b){return b.id!=a.id}),d("#file_uploads_dialog_link").text(c.t("errors.uploading","Uploading Error")),h.showStatus(),i.find(".cancel_upload_link").hide().end().find(".status").text(c.t("errors.failed_uploading","Failed uploading: %{error_info}",{error_info:f})),i.addClass("done").addClass("errored"),h.swfFileQueueNext()},swfFileOpen:function(a){var b=h.initFile(a);a.upload_url&&d("#file_swf").uploadify("settings","uploader",a.upload_url),a.upload_params&&d("#file_swf").uploadify("settings","formData",a.upload_params),h.swfQueuedAndPendingFiles=d.grep(h.swfQueuedAndPendingFiles,function(b){return b.id!=a.id}),b.find(".progress_bar").progressbar("value",1),b.find(".status").text(c.t("messages.uploading","Uploading"))},swfFileProgress:function(a,b,d,e,f){var g=h.initFile(a);g.find(".status").text(c.t("messages.uploading","Uploading")),g.find(".cancel_upload_link").showIf(e<f),g.find(".progress_bar").progressbar("value",100*e/f)},s3Success:function(a){var b=h.initFile(a);b.find(".status").text(c.t("messages.finalizing","Finalizing"));var e=function(){h.swfFileError(a,"","",c.t("errors.unexpected_response","didn't get back expected response"))};d.ajaxJSON(b.data("success_url"),"GET",{},function(b){b&&b.attachment?(h.swfFileSuccess(a,JSON.stringify(b),!0),b.deleted_attachment_ids&&f.deleteAttachmentIds(b.deleted_attachment_ids)):e()},e)},swfFileSuccess:function(a,b,e){if(b.indexOf("<PostResponse>")>=0){h.s3Success(a);return}var g=h.initFile(a);h.swfFiles=d.grep(h.swfFiles,function(b){return b.id!=a.id}),g.find(".status").text(c.t("messages.upload_complete","Done uploading")),g.find(".cancel_upload_link").remove(),g.find(".progress_bar").progressbar("value",100),g.addClass("done");var i=g.data("folder").context_string;setTimeout(function(){g.slideUp(function(){g.remove()})},5e3);if(b)try{b=d.parseJSON(b);if("errors"in b&&!jQuery.isEmptyObject(b.errors)){h.swfFileError(a,"","",JSON.stringify(b.errors),!1);return}b.swf=!0,setTimeout(function(){b.deleted_attachment_ids&&f.deleteAttachmentIds(b.deleted_attachment_ids),f.updateFile(i,b)},500)}catch(j){h.swfFileError(a,"","",j.toString(),!1);return}else g.find(".status").text(c.t("warnings.file_uploaded_without_response","File may have uploaded, but the server failed to respond.  Reload the page to confirm."));h.swfFileQueueNext()},swfQueueComplete:function(){h.updateUploadCount()},initFile:function(a){a.id||(a.id="tmp_"+Math.round(Math.random()*9999));var b=d("#file_upload_"+a.id);return b.length===0&&(b=d("#file_upload_blank").clone(!0).attr("id","file_upload_"+a.id),d("#file_uploads").append(b),b.find(".progress_bar").progressbar(),b.click(function(a){d(this).find(".cancel_upload_link:visible").length===0&&d(this).hasClass("done")&&(a.preventDefault(),d(this).slideUp(function(){d(this).remove(),h.updateUploadCount()}))}),b.find(".cancel_upload_link").click(function(b){b.preventDefault();var c=(d(this).parents(".file_upload").attr("id")||"").substring(12);d("#file_swf").uploadify("cancel",a.id)})),b.find(".file_name").text(a.name),b.slideDown("fast"),b},attempt:0,file_details:{}}}),function(){require(["full_files","jquery.google-analytics","use!uploadify"],function(){return $(function(){return $(".manage_collaborations").on("click",function(){return $.trackEvent("files","click","manage_collaborations")})})})}.call(this),define("compiled/bundles/full_files",function(){})